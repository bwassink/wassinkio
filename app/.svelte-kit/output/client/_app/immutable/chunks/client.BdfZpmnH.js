const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./enableLiveMode.BFjcDQu4.js","./stegaEncodeSourceMap.DPkyoOST.js"])))=>i.map(i=>d[i]);
import{_ as Ct}from"./preload-helper.D6kgxu3v.js";import{r as $s,w as Nt,d as Cs}from"./index.CxsFIwBe.js";import{o as ks,D as As}from"./scheduler.BJrbY8Dn.js";new TextEncoder;const Os=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qt=/_key\s*==\s*['"](.*)['"]/,Ts=/^\d*:\d*$/;function Xt(t){return typeof t=="number"||typeof t=="string"&&/^\[\d+\]$/.test(t)}function kt(t){return typeof t=="string"?Qt.test(t.trim()):typeof t=="object"&&"_key"in t}function tn(t){if(typeof t=="string"&&Ts.test(t))return!0;if(!Array.isArray(t)||t.length!==2)return!1;const[e,r]=t;return(typeof e=="number"||e==="")&&(typeof r=="number"||r==="")}function Rs(t,e,r){const n=typeof e=="string"?Zt(e):e;if(!Array.isArray(n))throw new Error("Path must be an array or a string");let i=t;for(let s=0;s<n.length;s++){const o=n[s];if(Xt(o)){if(!Array.isArray(i))return r;i=i[o]}if(kt(o)){if(!Array.isArray(i))return r;i=i.find(a=>a._key===o._key)}if(typeof o=="string"&&(i=typeof i=="object"&&i!==null?i[o]:void 0),typeof i>"u")return r}return i}function rn(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((e,r,n)=>{const i=typeof r;if(i==="number")return`${e}[${r}]`;if(i==="string")return`${e}${n===0?"":"."}${r}`;if(kt(r)&&r._key)return`${e}[_key=="${r._key}"]`;if(Array.isArray(r)){const[s,o]=r;return`${e}[${s}:${o}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(r)}\``)},"")}function Zt(t){if(typeof t!="string")throw new Error("Path is not a string");const e=t.match(Os);if(!e)throw new Error("Invalid path string");return e.map(Ps)}function Ps(t){return Xt(t)?xs(t):kt(t)?Ms(t):tn(t)?Is(t):t}function xs(t){return Number(t.replace(/[^\d]/g,""))}function Ms(t){return{_key:t.match(Qt)[1]}}function Is(t){const[e,r]=t.split(":").map(n=>n===""?n:Number(n));return[e,r]}var er=Object.freeze({__proto__:null,fromString:Zt,get:Rs,isIndexSegment:Xt,isIndexTuple:tn,isKeySegment:kt,reKeySegment:Qt,toString:rn});const zt="drafts.";function nn(t){return t.startsWith(zt)?t.slice(zt.length):t}const yr={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},gr={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function js(t){return`$${t.map(e=>typeof e=="string"?`['${e.replace(/[\f\n\r\t'\\]/g,r=>yr[r])}']`:typeof e=="number"?`[${e}]`:e._key!==""?`[?(@._key=='${e._key.replace(/['\\]/g,r=>yr[r])}')]`:`[${e._index}]`).join("")}`}function Fs(t){const e=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let n;for(;(n=r.exec(t))!==null;){if(n[1]!==void 0){const i=n[1].replace(/\\(\\|f|n|r|t|')/g,s=>gr[s]);e.push(i);continue}if(n[2]!==void 0){e.push(parseInt(n[2],10));continue}if(n[3]!==void 0){const i=n[3].replace(/\\(\\')/g,s=>gr[s]);e.push({_key:i,_index:-1});continue}}return e}function sn(t){return t.map(e=>{if(typeof e=="string"||typeof e=="number")return e;if(e._key!=="")return{_key:e._key};if(e._index!==-1)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function qs(t){return(typeof t=="string"?Zt(t):t).map(e=>{if(typeof e=="string"||typeof e=="number")return e;if(Array.isArray(e))throw new Error(`IndexTuple segments aren't supported:${JSON.stringify(e)}`);if(Ls(e))return e;if(e._key)return{_key:e._key,_index:-1};throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function Ls(t){return typeof t=="object"&&"_key"in t&&"_index"in t}function Ds(t){return t.map(e=>{if(typeof e=="string"||typeof e=="number")return e;if(e._index!==-1)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function Us(t,e){if(!(e!=null&&e.mappings))return;const r=js(Ds(t));if(e.mappings[r]!==void 0)return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};const n=Object.entries(e.mappings).filter(([a])=>r.startsWith(a)).sort(([a],[c])=>c.length-a.length);if(n.length==0)return;const[i,s]=n[0],o=r.substring(i.length);return{mapping:s,matchedPath:i,pathSuffix:o}}function Cc(t){const{baseUrl:e,workspace:r="default",tool:n="default",id:i,type:s,path:o,projectId:a,dataset:c}=t;if(!e)throw new Error("baseUrl is required");if(!o)throw new Error("path is required");if(!i)throw new Error("id is required");if(e!=="/"&&e.endsWith("/"))throw new Error("baseUrl must not end with a slash");const l=r==="default"?void 0:r,u=n==="default"?void 0:n,f=nn(i),d=Array.isArray(o)?rn(sn(o)):o,y=new URLSearchParams({baseUrl:e,id:f,type:s,path:d});l&&y.set("workspace",l),u&&y.set("tool",u),a&&y.set("projectId",a),c&&y.set("dataset",c),i.startsWith(zt)&&y.set("isDraft","");const h=[e==="/"?"":e];l&&h.push(l);const p=["mode=presentation",`id=${f}`,`type=${s}`,`path=${encodeURIComponent(d)}`];return u&&p.push(`tool=${u}`),h.push("intent","edit",`${p.join(";")}?${y}`),h.join("/")}function Ns(t){const{resultSourceMap:e,resultPath:r}=t,{mapping:n,pathSuffix:i}=Us(r,e)||{};if(!n||n.source.type==="literal"||n.source.type==="unknown")return;const s=e.documents[n.source.document],o=e.paths[n.source.path];if(s&&o){const{baseUrl:a,workspace:c,tool:l}=zs(typeof t.studioUrl=="function"?t.studioUrl(s):t.studioUrl);if(!a)return;const{_id:u,_type:f,_projectId:d,_dataset:y}=s;return{baseUrl:a,workspace:c,tool:l,id:u,type:f,path:Fs(o+i),projectId:d,dataset:y}}}function zs(t){let e=typeof t=="string"?t:t.baseUrl;return e!=="/"&&(e=e.replace(/\/$/,"")),typeof t=="string"?{baseUrl:e}:{...t,baseUrl:e}}var on={},Ks={kValues:Symbol("values"),kStorage:Symbol("kStorage"),kStorages:Symbol("kStorages"),kTransfromer:Symbol("kTransformer"),kTTL:Symbol("kTTL"),kOnDedupe:Symbol("kOnDedupe"),kOnError:Symbol("kOnError"),kOnHit:Symbol("kOnHit"),kOnMiss:Symbol("kOnMiss"),kStale:Symbol("kStale")},Kt={exports:{}};(function(t,e){const{hasOwnProperty:r}=Object.prototype,n=y();n.configure=y,n.stringify=n,n.default=n,e.stringify=n,e.configure=y,t.exports=n;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s(h){return h.length<5e3&&!i.test(h)?`"${h}"`:JSON.stringify(h)}function o(h){if(h.length>200)return h.sort();for(let p=1;p<h.length;p++){const m=h[p];let v=p;for(;v!==0&&h[v-1]>m;)h[v]=h[v-1],v--;h[v]=m}return h}const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function c(h){return a.call(h)!==void 0&&h.length!==0}function l(h,p,m){h.length<m&&(m=h.length);const v=p===","?"":" ";let k=`"0":${v}${h[0]}`;for(let S=1;S<m;S++)k+=`${p}"${S}":${v}${h[S]}`;return k}function u(h,p){let m;if(r.call(h,p)&&(m=h[p],typeof m!="boolean"))throw new TypeError(`The "${p}" argument must be of type boolean`);return m===void 0||m}function f(h,p){let m;if(r.call(h,p)){if(m=h[p],typeof m!="number")throw new TypeError(`The "${p}" argument must be of type number`);if(!Number.isInteger(m))throw new TypeError(`The "${p}" argument must be an integer`);if(m<1)throw new RangeError(`The "${p}" argument must be >= 1`)}return m===void 0?1/0:m}function d(h){return h===1?"1 item":`${h} items`}function y(h){const p=function(x){if(r.call(x,"strict")){const g=x.strict;if(typeof g!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(g)return b=>{let C="Object can not safely be stringified. Received type "+typeof b;throw typeof b!="function"&&(C+=` (${b.toString()})`),new Error(C)}}}(h={...h});p&&(h.bigint===void 0&&(h.bigint=!1),"circularValue"in h||(h.circularValue=Error));const m=function(x){if(r.call(x,"circularValue")){const g=x.circularValue;if(typeof g=="string")return`"${g}"`;if(g==null)return g;if(g===Error||g===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(h),v=u(h,"bigint"),k=u(h,"deterministic"),S=f(h,"maximumDepth"),w=f(h,"maximumBreadth");function _(x,g,b,C,E,O){let $=g[x];switch(typeof $=="object"&&$!==null&&typeof $.toJSON=="function"&&($=$.toJSON(x)),$=C.call(g,x,$),typeof $){case"string":return s($);case"object":{if($===null)return"null";if(b.indexOf($)!==-1)return m;let P="",j=",";const F=O;if(Array.isArray($)){if($.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push($),E!==""&&(P+=`
${O+=E}`,j=`,
${O}`);const J=Math.min($.length,w);let ee=0;for(;ee<J-1;ee++){const pr=_(String(ee),$,b,C,E,O);P+=pr!==void 0?pr:"null",P+=j}const se=_(String(ee),$,b,C,E,O);return P+=se!==void 0?se:"null",$.length-1>w&&(P+=`${j}"... ${d($.length-w-1)} not stringified"`),E!==""&&(P+=`
${F}`),b.pop(),`[${P}]`}let q=Object.keys($);const W=q.length;if(W===0)return"{}";if(S<b.length+1)return'"[Object]"';let I="",H="";E!==""&&(j=`,
${O+=E}`,I=" ");const re=Math.min(W,w);k&&!c($)&&(q=o(q)),b.push($);for(let J=0;J<re;J++){const ee=q[J],se=_(ee,$,b,C,E,O);se!==void 0&&(P+=`${H}${s(ee)}:${I}${se}`,H=j)}return W>w&&(P+=`${H}"...":${I}"${d(W-w)} not stringified"`,H=j),E!==""&&H.length>1&&(P=`
${O}${P}
${F}`),b.pop(),`{${P}}`}case"number":return isFinite($)?String($):p?p($):"null";case"boolean":return $===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String($);default:return p?p($):void 0}}function A(x,g,b,C,E,O){switch(typeof g=="object"&&g!==null&&typeof g.toJSON=="function"&&(g=g.toJSON(x)),typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(b.indexOf(g)!==-1)return m;const $=O;let P="",j=",";if(Array.isArray(g)){if(g.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push(g),E!==""&&(P+=`
${O+=E}`,j=`,
${O}`);const W=Math.min(g.length,w);let I=0;for(;I<W-1;I++){const re=A(String(I),g[I],b,C,E,O);P+=re!==void 0?re:"null",P+=j}const H=A(String(I),g[I],b,C,E,O);return P+=H!==void 0?H:"null",g.length-1>w&&(P+=`${j}"... ${d(g.length-w-1)} not stringified"`),E!==""&&(P+=`
${$}`),b.pop(),`[${P}]`}b.push(g);let F="";E!==""&&(j=`,
${O+=E}`,F=" ");let q="";for(const W of C){const I=A(W,g[W],b,C,E,O);I!==void 0&&(P+=`${q}${s(W)}:${F}${I}`,q=j)}return E!==""&&q.length>1&&(P=`
${O}${P}
${$}`),b.pop(),`{${P}}`}case"number":return isFinite(g)?String(g):p?p(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String(g);default:return p?p(g):void 0}}function R(x,g,b,C,E){switch(typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(typeof(g=g.toJSON(x))!="object")return R(x,g,b,C,E);if(g===null)return"null"}if(b.indexOf(g)!==-1)return m;const O=E;if(Array.isArray(g)){if(g.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push(g);let I=`
${E+=C}`;const H=`,
${E}`,re=Math.min(g.length,w);let J=0;for(;J<re-1;J++){const se=R(String(J),g[J],b,C,E);I+=se!==void 0?se:"null",I+=H}const ee=R(String(J),g[J],b,C,E);return I+=ee!==void 0?ee:"null",g.length-1>w&&(I+=`${H}"... ${d(g.length-w-1)} not stringified"`),I+=`
${O}`,b.pop(),`[${I}]`}let $=Object.keys(g);const P=$.length;if(P===0)return"{}";if(S<b.length+1)return'"[Object]"';const j=`,
${E+=C}`;let F="",q="",W=Math.min(P,w);c(g)&&(F+=l(g,j,w),$=$.slice(g.length),W-=g.length,q=j),k&&($=o($)),b.push(g);for(let I=0;I<W;I++){const H=$[I],re=R(H,g[H],b,C,E);re!==void 0&&(F+=`${q}${s(H)}: ${re}`,q=j)}return P>w&&(F+=`${q}"...": "${d(P-w)} not stringified"`,q=j),q!==""&&(F=`
${E}${F}
${O}`),b.pop(),`{${F}}`}case"number":return isFinite(g)?String(g):p?p(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String(g);default:return p?p(g):void 0}}function M(x,g,b){switch(typeof g){case"string":return s(g);case"object":{if(g===null)return"null";if(typeof g.toJSON=="function"){if(typeof(g=g.toJSON(x))!="object")return M(x,g,b);if(g===null)return"null"}if(b.indexOf(g)!==-1)return m;let C="";if(Array.isArray(g)){if(g.length===0)return"[]";if(S<b.length+1)return'"[Array]"';b.push(g);const j=Math.min(g.length,w);let F=0;for(;F<j-1;F++){const W=M(String(F),g[F],b);C+=W!==void 0?W:"null",C+=","}const q=M(String(F),g[F],b);return C+=q!==void 0?q:"null",g.length-1>w&&(C+=`,"... ${d(g.length-w-1)} not stringified"`),b.pop(),`[${C}]`}let E=Object.keys(g);const O=E.length;if(O===0)return"{}";if(S<b.length+1)return'"[Object]"';let $="",P=Math.min(O,w);c(g)&&(C+=l(g,",",w),E=E.slice(g.length),P-=g.length,$=","),k&&(E=o(E)),b.push(g);for(let j=0;j<P;j++){const F=E[j],q=M(F,g[F],b);q!==void 0&&(C+=`${$}${s(F)}:${q}`,$=",")}return O>w&&(C+=`${$}"...":"${d(O-w)} not stringified"`),b.pop(),`{${C}}`}case"number":return isFinite(g)?String(g):p?p(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(v)return String(g);default:return p?p(g):void 0}}return function(x,g,b){if(arguments.length>1){let C="";if(typeof b=="number"?C=" ".repeat(Math.min(b,10)):typeof b=="string"&&(C=b.slice(0,10)),g!=null){if(typeof g=="function")return _("",{"":x},[],g,C,"");if(Array.isArray(g))return A("",x,[],function(E){const O=new Set;for(const $ of E)(typeof $=="string"||typeof $=="number")&&O.add(String($));return O}(g),C,"")}if(C.length!==0)return R("",x,[],C,"")}return M("",x,[])}}})(Kt,Kt.exports);var an=Kt.exports;function mr(t){return t*Math.random()|0}var At={findNotMatching:function(t,e){const r=[];let n=0;for(let i=0;i<t.length;i++)for(let s=n;s<e.length;s++)t[i]!==e[s]&&(r.push(e[s]),n=s+1);return r},findMatchingIndexes:function(t,e){const r=[];let n=0;for(let i=0;i<t.length;i++)for(let s=n;s<e.length;s++)t[i]===e[s]&&(r.push(s),n=s+1);return r},bsearchIndex:function(t,e){let r=0,n=t.length-1;for(;r<=n;){const i=(r+n)/2|0;if(t[i]===e)return i;t[i]<e?r=i+1:n=i-1}return-1},wildcardMatch:function(t,e){if(t==="*"||t.length===e.length&&t===e)return!0;let r=0,n=0;for(;r<t.length&&n<e.length;)if(t[r]!==e[n]){if(t[r]!=="*")return!1;if(t[r+1]===e[n]){r++;continue}n++}else r++,n++;return r>=t.length-1},randomSubset:function(t,e){if(t.length<1||e<1)return[];const r=Math.min(t.length,e),n=(s=1,o=r,(s=Math.floor(s))+mr(1+(o=Math.floor(o))-s)),i=new Set;var s,o;for(let c=0;c<n;c++)i.add(mr(t.length));const a=[];for(const c of i)a.push(t[c]);return a},abstractLogging:function(){const t=()=>{};return{fatal:t,error:t,warn:t,info:t,debug:t,trace:t}},isServerSide:typeof window>"u"},vr,wr,cn=class{constructor(e){this.options=e}async get(e){throw new Error("storage get method not implemented")}async set(e,r,n,i){throw new Error("storage set method not implemented")}async remove(e){throw new Error("storage remove method not implemented")}async invalidate(e){throw new Error("storage invalidate method not implemented")}async clear(e){throw new Error("storage clear method not implemented")}async refresh(){throw new Error("storage refresh method not implemented")}};function te(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=function(){return this}),te.of=function(){var t=arguments,e=t.length,r=0;return new te(function(){return r>=e?{done:!0}:{done:!1,value:t[r++]}})},te.empty=function(){return new te(function(){return{done:!0}})},te.fromSequence=function(t){var e=0,r=t.length;return new te(function(){return e>=r?{done:!0}:{done:!1,value:t[e++]}})},te.is=function(t){return t instanceof te||typeof t=="object"&&t!==null&&typeof t.next=="function"};var Ws=te,Wt={};Wt.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Wt.SYMBOL_SUPPORT=typeof Symbol<"u";var un=Wt,Vs=un.ARRAY_BUFFER_SUPPORT,Hs=un.SYMBOL_SUPPORT,ln=function(t,e){var r,n,i,s,o;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof e!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||Vs&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]")for(i=0,s=t.length;i<s;i++)e(t[i],i);else if(typeof t.forEach!="function")if(Hs&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next!="function")for(n in t)t.hasOwnProperty(n)&&e(t[n],n);else for(r=t,i=0;(o=r.next()).done!==!0;)e(o.value,i),i++;else t.forEach(e)},tr={};(function(t){var e=Math.pow(2,8)-1,r=Math.pow(2,16)-1,n=Math.pow(2,32)-1,i=Math.pow(2,7)-1,s=Math.pow(2,15)-1,o=Math.pow(2,31)-1;t.getPointerArray=function(c){var l=c-1;if(l<=e)return Uint8Array;if(l<=r)return Uint16Array;if(l<=n)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},t.getSignedPointerArray=function(c){var l=c-1;return l<=i?Int8Array:l<=s?Int16Array:l<=o?Int32Array:Float64Array},t.getNumberType=function(c){return c===(0|c)?Math.sign(c)===-1?c<=127&&c>=-128?Int8Array:c<=32767&&c>=-32768?Int16Array:Int32Array:c<=255?Uint8Array:c<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};t.getMinimalRepresentation=function(c,l){var u,f,d,y,h,p=null,m=0;for(y=0,h=c.length;y<h;y++)d=l?l(c[y]):c[y],f=t.getNumberType(d),(u=a[f.name])>m&&(m=u,p=f);return p},t.isTypedArray=function(c){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(c)},t.concat=function(){var c,l,u,f=0;for(c=0,u=arguments.length;c<u;c++)f+=arguments[c].length;var d=new arguments[0].constructor(f);for(c=0,l=0;c<u;c++)d.set(arguments[c],l),l+=arguments[c].length;return d},t.indices=function(c){for(var l=new(t.getPointerArray(c))(c),u=0;u<c;u++)l[u]=u;return l}})(tr);var Ie={},br=ln,_r=tr;function xt(t){return typeof t.length=="number"?t.length:typeof t.size=="number"?t.size:void 0}Ie.isArrayLike=function(t){return Array.isArray(t)||_r.isTypedArray(t)},Ie.guessLength=xt,Ie.toArray=function(t){var e=xt(t),r=typeof e=="number"?new Array(e):[],n=0;return br(t,function(i){r[n++]=i}),r},Ie.toArrayWithIndices=function(t){var e=xt(t),r=typeof e=="number"?_r.getPointerArray(e):Array,n=typeof e=="number"?new Array(e):[],i=typeof e=="number"?new r(e):[],s=0;return br(t,function(o){n[s]=o,i[s]=s++}),[n,i]};var Mt=Ws,Bs=ln,Js=tr,Gs=Ie;function L(t,e,r){if(arguments.length<2&&(r=t,t=null,e=null),this.capacity=r,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var n=Js.getPointerArray(r);this.forward=new n(r),this.backward=new n(r),this.K=typeof t=="function"?new t(r):new Array(r),this.V=typeof e=="function"?new e(r):new Array(r),this.size=0,this.head=0,this.tail=0,this.items={}}L.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},L.prototype.splayOnTop=function(t){var e=this.head;if(this.head===t)return this;var r=this.backward[t],n=this.forward[t];return this.tail===t?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[e]=t,this.head=t,this.forward[t]=e,this},L.prototype.set=function(t,e){var r=this.items[t];if(typeof r<"u")return this.splayOnTop(r),void(this.V[r]=e);this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[t]=r,this.K[r]=t,this.V[r]=e,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r},L.prototype.setpop=function(t,e){var r=null,n=null,i=this.items[t];return typeof i<"u"?(this.splayOnTop(i),r=this.V[i],this.V[i]=e,{evicted:!1,key:t,value:r}):(this.size<this.capacity?i=this.size++:(i=this.tail,this.tail=this.backward[i],r=this.V[i],n=this.K[i],delete this.items[n]),this.items[t]=i,this.K[i]=t,this.V[i]=e,this.forward[i]=this.head,this.backward[this.head]=i,this.head=i,n?{evicted:!0,key:n,value:r}:null)},L.prototype.has=function(t){return t in this.items},L.prototype.get=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]},L.prototype.peek=function(t){var e=this.items[t];if(!(typeof e>"u"))return this.V[e]},L.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var r=0,n=this.size,i=this.head,s=this.K,o=this.V,a=this.forward;r<n;)t.call(e,o[i],s[i],this),i=a[i],r++},L.prototype.keys=function(){var t=0,e=this.size,r=this.head,n=this.K,i=this.forward;return new Mt(function(){if(t>=e)return{done:!0};var s=n[r];return++t<e&&(r=i[r]),{done:!1,value:s}})},L.prototype.values=function(){var t=0,e=this.size,r=this.head,n=this.V,i=this.forward;return new Mt(function(){if(t>=e)return{done:!0};var s=n[r];return++t<e&&(r=i[r]),{done:!1,value:s}})},L.prototype.entries=function(){var t=0,e=this.size,r=this.head,n=this.K,i=this.V,s=this.forward;return new Mt(function(){if(t>=e)return{done:!0};var o=n[r],a=i[r];return++t<e&&(r=s[r]),{done:!1,value:[o,a]}})},typeof Symbol<"u"&&(L.prototype[Symbol.iterator]=L.prototype.entries),L.prototype.inspect=function(){for(var t,e=new Map,r=this.entries();!(t=r.next()).done;)e.set(t.value[0],t.value[1]);return Object.defineProperty(e,"constructor",{value:L,enumerable:!1}),e},typeof Symbol<"u"&&(L.prototype[Symbol.for("nodejs.util.inspect.custom")]=L.prototype.inspect),L.from=function(t,e,r,n){if(arguments.length<2){if(typeof(n=Gs.guessLength(t))!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(n=e,e=null,r=null);var i=new L(e,r,n);return Bs(t,function(s,o){i.set(o,s)}),i};const Ys=L,{abstractLogging:Qs}=At,Xs=cn,{findMatchingIndexes:Zs,findNotMatching:Er,bsearchIndex:ei,wildcardMatch:ti}=At,ri=typeof globalThis.setImmediate<"u"?globalThis.setImmediate:(t,...e)=>setTimeout(t,0,...e);let je;function Ye(){if(je!==void 0)return je;je=Math.floor(Date.now()/1e3);const t=setTimeout(ni,1e3);return typeof t.unref=="function"&&t.unref(),je}function ni(){je=void 0}var si=class extends Xs{constructor(t={}){if(t.size&&(typeof t.size!="number"||t.size<1))throw new Error("size must be a positive integer greater than 0");super(t),this.size=t.size||1024,this.log=t.log||Qs(),this.invalidation=t.invalidation||!1,this.init()}init(){this.store=new Ys(this.size),this.invalidation&&(this.keysReferences=new Map,this.referencesKeys=new Map)}get(t){this.log.debug({msg:"acd/storage/memory.get",key:t});const e=this.store.get(t);if(e){if(this.log.debug({msg:"acd/storage/memory.get, entry",entry:e,now:Ye()}),e.start+e.ttl>Ye())return this.log.debug({msg:"acd/storage/memory.get, key is NOT expired",key:t,entry:e}),e.value;this.log.debug({msg:"acd/storage/memory.get, key is EXPIRED",key:t,entry:e}),ri(()=>this.remove(t))}}getTTL(t){this.log.debug({msg:"acd/storage/memory.getTTL",key:t});const e=this.store.peek(t);let r=0;return e&&(r=e.start+e.ttl-Ye(),r<0&&(r=0)),r}set(t,e,r,n){if(this.log.debug({msg:"acd/storage/memory.set",key:t,value:e,ttl:r,references:n}),!(r=Number(r))||r<0)return;const i=this.store.has(t),s=this.store.setpop(t,{value:e,ttl:r,start:Ye()});if(this.log.debug({msg:"acd/storage/memory.set, evicted",removed:s}),s&&s.evicted&&(this.log.debug({msg:"acd/storage/memory.set, remove evicted key",key:s.key}),this._removeReferences([s.key])),!n||n.length<1)return;if(!this.invalidation)return void this.log.warn({msg:"acd/storage/memory.set, invalidation is disabled, references are useless"});let o;if(n=[...new Set(n)],i&&(o=this.keysReferences.get(t),this.log.debug({msg:"acd/storage/memory.set, current keys-references",key:t,references:o}),o)){o.sort(),n.sort();const c=Er(n,o);for(const l of c){const u=this.referencesKeys.get(l);if(!u)continue;const f=ei(u,t);if(!(f<0)){if(u.splice(f,1),u.length<1){this.referencesKeys.delete(l);continue}this.referencesKeys.set(l,u)}}}const a=o?Er(o,n):n;for(let c=0;c<a.length;c++){const l=a[c];let u=this.referencesKeys.get(l);u?(this.log.debug({msg:"acd/storage/memory.set, add reference-key",key:t,reference:l}),u.push(t)):u=[t],this.log.debug({msg:"acd/storage/memory.set, set reference-keys",keys:u,reference:l}),this.referencesKeys.set(l,u)}this.keysReferences.set(t,n)}remove(t){this.log.debug({msg:"acd/storage/memory.remove",key:t});const e=this._removeKey(t);return this._removeReferences([t]),e}_removeKey(t){return this.log.debug({msg:"acd/storage/memory._removeKey",key:t}),!!this.store.has(t)&&(this.store.set(t,void 0),!0)}_removeReferences(t){if(!this.invalidation)return;this.log.debug({msg:"acd/storage/memory._removeReferences",keys:t});const e=new Set;for(let r=0;r<t.length;r++){const n=t[r],i=this.keysReferences.get(n);if(i){for(let s=0;s<i.length;s++)e.add(i[s]);this.log.debug({msg:"acd/storage/memory._removeReferences, delete key-references",key:n}),this.keysReferences.delete(n)}}this._removeReferencesKeys([...e],t)}_removeReferencesKeys(t,e){e.sort(),this.log.debug({msg:"acd/storage/memory._removeReferencesKeys",references:t,keys:e});for(let r=0;r<t.length;r++){const n=t[r],i=this.referencesKeys.get(n);if(this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, get reference-key",reference:n,keys:e,referencesKeys:i}),!i)continue;const s=Zs(e,i);if(this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, removing",reference:n,referencesToRemove:s,referencesKeys:i}),s.length!==i.length)for(let o=s.length-1;o>=0;o--)this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, remove",reference:n,referencesKeys:i,at:s[o]}),i.splice(s[o],1);else this.log.debug({msg:"acd/storage/memory._removeReferencesKeys, delete",reference:n}),this.referencesKeys.delete(n)}}invalidate(t){return this.invalidation?(this.log.debug({msg:"acd/storage/memory.invalidate",references:t}),Array.isArray(t)?this._invalidateReferences(t):this._invalidateReference(t)):(this.log.warn({msg:"acd/storage/memory.invalidate, exit due invalidation is disabled"}),[])}_invalidateReferences(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r],i=this.referencesKeys.get(n);if(this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove keys on reference",reference:n,keys:i}),i){for(let s=0;s<i.length;s++){const o=i[s];this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove key on reference",reference:n,key:o}),this._removeKey(o)&&e.push(o)}this.log.debug({msg:"acd/storage/memory._invalidateReferences, remove references of",reference:n,keys:i}),this._removeReferences([...i])}}return e}_invalidateReference(t){if(t.includes("*")){const n=[];for(const i of this.referencesKeys.keys())ti(t,i)&&n.push(i);return this._invalidateReferences(n)}const e=this.referencesKeys.get(t),r=[];if(this.log.debug({msg:"acd/storage/memory._invalidateReference, remove keys on reference",reference:t,keys:e}),!e)return r;for(let n=0;n<e.length;n++){const i=e[n];this.log.debug({msg:"acd/storage/memory._invalidateReference, remove key on reference",reference:t,key:i}),this._removeKey(i)&&r.push(i)}return this.log.debug({msg:"acd/storage/memory._invalidateReference, remove references of",reference:t,keys:e}),this._removeReferences([...e]),r}clear(t){if(this.log.debug({msg:"acd/storage/memory.clear",name:t}),!t)return this.store.clear(),this.invalidation?(this.referencesKeys.clear(),void this.keysReferences.clear()):void 0;const e=[];this.store.forEach((n,i)=>{this.log.debug({msg:"acd/storage/memory.clear, iterate key",key:i}),i.indexOf(t)===0&&(this.log.debug({msg:"acd/storage/memory.clear, remove key",key:i}),e.push(i))});const r=[];for(let n=0;n<e.length;n++)this._removeKey(e[n])&&r.push(e[n]);return this._removeReferences(r),r}refresh(){this.log.debug({msg:"acd/storage/memory.refresh"}),this.init()}};const{isServerSide:fn}=At;let hn;fn&&(hn=function(){if(wr)return vr;wr=1;const t=an,e=cn,{findNotMatching:r,randomSubset:n,abstractLogging:i}=At;return vr=class extends e{constructor(s={}){if(!s.client||typeof s.client!="object")throw new Error("Redis client is required");if(super(s),s.invalidation&&s.invalidation.referencesTTL&&(typeof s.invalidation.referencesTTL!="number"||s.invalidation.referencesTTL<1))throw new Error("invalidation.referencesTTL must be a positive integer greater than 1");this.log=s.log||i(),this.store=s.client,this.invalidation=!!s.invalidation,this.referencesTTL=s.invalidation&&s.invalidation.referencesTTL||60}getReferenceKeyLabel(s){return`r:${s}`}getKeyReferenceLabel(s){return`k:${s}`}async get(s){this.log.debug({msg:"acd/storage/redis.get",key:s});try{const o=await this.store.get(s);return o?JSON.parse(o):this.invalidation?void this.clearReferences(s):void 0}catch(o){this.log.error({msg:"acd/storage/redis.get error",err:o,key:s})}}async getTTL(s){this.log.debug({msg:"acd/storage/memory.getTTL",key:s});let o=await this.store.pttl(s);return o<0?0:(o=Math.ceil(o/1e3),o)}async set(s,o,a,c){if(this.log.debug({msg:"acd/storage/redis.set key",key:s,value:o,ttl:a,references:c}),(a=Number(a))&&!(a<0))try{if(await this.store.set(s,t(o),"EX",a),!c||c.length<1)return;if(!this.invalidation)return void this.log.warn({msg:"acd/storage/redis.set, invalidation is disabled, references are useless",key:s,references:c});const l=[],u=await this.store.smembers(this.getKeyReferenceLabel(s));if(this.log.debug({msg:"acd/storage/redis.set current references",key:s,currentReferences:u}),u.length>1){u.sort(),c.sort();const y=r(c,u);for(const h of y)l.push(["srem",this.getReferenceKeyLabel(h),s]);l.push(["del",this.getKeyReferenceLabel(s)])}const f=u.length>1?r(u,c):c;this.log.debug({msg:"acd/storage/redis.set references to add",key:s,referencesToAdd:f});for(let y=0;y<f.length;y++){const h=f[y],p=this.getReferenceKeyLabel(h);l.push(["sadd",p,s]),l.push(["expire",p,this.referencesTTL])}const d=this.getKeyReferenceLabel(s);l.push(["sadd",d,c]),l.push(["expire",d,a]),this.log.debug({msg:"acd/storage/redis.set references writes",writes:l}),await this.store.pipeline(l).exec()}catch(l){this.log.error({msg:"acd/storage/redis.set error",err:l,key:s,ttl:a,references:c})}}async remove(s){this.log.debug({msg:"acd/storage/redis.remove",key:s});try{const o=await this.store.del(s)>0;return o&&this.invalidation&&await this.clearReferences(s),o}catch(o){this.log.error({msg:"acd/storage/redis.remove error",err:o,key:s})}}async invalidate(s){if(!this.invalidation)return this.log.warn({msg:"acd/storage/redis.invalidate, exit due invalidation is disabled"}),[];this.log.debug({msg:"acd/storage/redis.invalidate",references:s});try{return Array.isArray(s)?await this._invalidateReferences(s):await this._invalidateReference(s)}catch(o){return this.log.error({msg:"acd/storage/redis.invalidate error",err:o,references:s}),[]}}async _invalidateReferences(s,o=!0){const a=s.map(f=>["smembers",o?this.getReferenceKeyLabel(f):f]),c=await this.store.pipeline(a).exec();this.log.debug({msg:"acd/storage/redis._invalidateReferences keys",keys:c});const l=[],u=[];for(let f=0;f<c.length;f++){const d=c[f][1];if(d){this.log.debug({msg:"acd/storage/redis._invalidateReferences got keys to be invalidated",keys:d});for(let y=0;y<d.length;y++){const h=d[y];this.log.debug({msg:"acd/storage/redis._invalidateReferences del key"+h}),u.push(h),l.push(["del",h])}}}return await this.store.pipeline(l).exec(),await this.clearReferences(u),u}async _invalidateReference(s){let o;if(s.includes("*")){const l=await this.store.keys(this.getReferenceKeyLabel(s));return this._invalidateReferences(l,!1)}o=await this.store.smembers(this.getReferenceKeyLabel(s)),this.log.debug({msg:"acd/storage/redis._invalidateReference keys",keys:o});const a=[],c=[];for(let l=0;l<o.length;l++){const u=o[l];this.log.debug({msg:"acd/storage/redis._invalidateReference del key"+u}),c.push(u),a.push(["del",u])}return await this.store.pipeline(a).exec(),await this.clearReferences(c),c}async clear(s){this.log.debug({msg:"acd/storage/redis.clear",name:s});try{if(!s)return void await this.store.flushall();const o=await this.store.keys(`${s}*`);this.log.debug({msg:"acd/storage/redis.clear keys",keys:o});const a=o.map(c=>["del",c]);if(await this.store.pipeline(a).exec(),!this.invalidation)return;await this.clearReferences(o)}catch(o){this.log.error({msg:"acd/storage/redis.clear error",err:o,name:s})}}async refresh(){try{await this.store.flushall()}catch(s){this.log.error({msg:"acd/storage/redis.refresh error",err:s})}}async clearReferences(s){try{if(!s)return void this.log.warn({msg:"acd/storage/redis.clearReferences invalid call due to empty key"});Array.isArray(s)||(s=[s]);const o=s.map(l=>["smembers",this.getKeyReferenceLabel(l)]),a=await this.store.pipeline(o).exec();this.log.debug({msg:"acd/storage/redis.clearReferences references",keys:s,referencesKeys:a});const c={};for(let l=0;l<s.length;l++){for(let f=0;f<a[l][1].length;f++){const d=this.getReferenceKeyLabel(a[l][1][f]);c[d]||(c[d]=["srem",d,s])}const u=this.getKeyReferenceLabel(s[l]);c[u]=["del",u]}this.log.debug({msg:"acd/storage/redis.clearReferences writes pipeline",writes:c}),await this.store.pipeline(Object.values(c)).exec()}catch(o){this.log.error({msg:"acd/storage/redis.clearReferences error",err:o})}}async gc(s="lazy",o={}){if(this.log.debug({msg:"acd/storage/redis.gc",mode:s,options:o}),!this.invalidation)return void this.log.warn({msg:"acd/storage/redis.gc does not run due to invalidation is disabled"});s!=="strict"&&s!=="lazy"&&(s="lazy");const a={references:{scanned:[],removed:[]},keys:{scanned:new Set,removed:new Set},loops:0,cursor:0,error:null};try{let c=0,l=64;if(o.chunk&&(typeof o.chunk!="number"||o.chunk<1))return a.error=new Error("chunk must be a positive integer greater than 1"),a;if(o.lazy){if(o.lazy.chunk){if(typeof o.lazy.chunk!="number"||o.lazy.chunk<1)return a.error=new Error("lazy.chunk must be a positive integer greater than 1"),a;l=o.lazy.chunk}if(o.lazy.cursor){if(typeof o.lazy.cursor!="number"||o.lazy.cursor<0)return a.error=new Error("lazy.cursor must be a positive integer greater than 0"),a;c=o.lazy.cursor}}const u=o.chunk||64,f=Math.min(l,u),d=c;let y=-1,h=-1;do{a.loops++;const p=await this.store.scan(c,"match","r:*","count",f);c=Number(p[0]),y=p[1].length;const m=s==="lazy"?n(p[1],l):p[1];a.references.scanned=a.references.scanned.concat(m);let v=[];for(let g=0;g<m.length;g++){const b=m[g];v.push(["smembers",b])}const k=await this.store.pipeline(v).exec(),S={},w={};for(let g=0;g<k.length;g++){const b=k[g],C=m[g];w[C]=b[1];for(let E=0;E<b[1].length;E++){const O=b[1][E];S[O]?S[O].push(C):S[O]=[C],a.keys.scanned.add(O)}}const _=Object.keys(S);v=_.map(g=>["exists",g]);const A=await this.store.pipeline(v).exec(),R={};for(let g=0;g<_.length;g++){const b=_[g];if(A[g][1]!==1)for(let C=0;C<S[b].length;C++){const E=S[b][C];R[E]?R[E].push(b):R[E]=[b],a.keys.removed.add(b)}}const M=Object.keys(R),x=[];for(let g=0;g<M.length;g++){const b=M[g];w[b].length===R[b].length?(x.push(["del",b]),a.references.removed.push(b)):x.push(["srem",b,R[b]])}if(await this.store.pipeline(x).exec(),h=x.length,s==="lazy"&&a.references.scanned.length>=l)break}while(d!==c&&y>0&&h>0);a.cursor=c,a.keys.scanned=Array.from(a.keys.scanned),a.keys.removed=Array.from(a.keys.removed)}catch(c){this.log.error({msg:"acd/storage/redis.gc error",err:c}),a.error=c}return a}}}());const ii=si,Sr="redis";var dn=function(t,e){if(!fn&&t===Sr)throw new Error("Redis storage is not supported in the browser");return t===Sr?new hn(e):new ii(e)};const{kValues:Q,kStorage:$r,kStorages:xe,kTransfromer:Cr,kTTL:kr,kOnDedupe:Ar,kOnError:Or,kOnHit:Tr,kOnMiss:Rr,kStale:Pr}=Ks,oi=an,ai=dn;class ci{constructor(e,r,n,i,s,o,a,c,l,u,f,d){this.dedupes=new Map,this.func=e,this.name=r,this.serialize=n,this.references=i,this.storage=s,this.transformer=o,this.ttl=a,this.onDedupe=c,this.onError=l,this.onHit=u,this.onMiss=f,this.stale=d}getKey(e){const r=this.serialize?this.serialize(e):e;return typeof r=="string"?r:oi(r)}getStorageKey(e){return`${this.name}~${e}`}getStorageName(){return`${this.name}~`}add(e){try{const r=this.getKey(e);let n=this.dedupes.get(r);return n?this.onDedupe(r):(n=new ui,this.buildPromise(n,e,r),this.dedupes.set(r,n)),n.promise}catch(r){this.onError(r)}}async wrapFunction(e,r){const n=this.getStorageKey(r);if(this.ttl>0||typeof this.ttl=="function"){const i=await this.get(n);if(i!==void 0){this.onHit(r);const s=typeof this.stale=="function"?this.stale(i):this.stale;return s>0&&await this.storage.getTTL(n)<=s&&this._wrapFunction(n,e,r).catch(ke),i}this.onMiss(r)}return this._wrapFunction(n,e,r)}async _wrapFunction(e,r,n){const i=await this.func(r,n),s=typeof this.stale=="function"?this.stale(i):this.stale;let o=typeof this.ttl=="function"?this.ttl(i):this.ttl;if(o==null||typeof o!="number"||!Number.isInteger(o))return this.onError(new Error("ttl must be an integer")),i;if(o+=s,o<1)return i;if(!this.references)return await this.set(e,i,o),i;try{let a=this.references(r,n,i),c=i;a&&typeof a.then=="function"&&(a=await a),this.transformer&&(c=this.transformer.serialize(i)),await this.storage.set(e,c,o,a)}catch(a){this.onError(a)}return i}buildPromise(e,r,n){e.promise=this.wrapFunction(r,n),e.promise.then(i=>(this.dedupes.delete(n),i)).catch(i=>{this.onError(i),this.dedupes.delete(n);const s=this.storage.remove(this.getStorageKey(n));s&&typeof s.catch=="function"&&s.catch(ke)})}async clear(e){if(e){const r=this.getKey(e);return this.dedupes.delete(r),void await this.storage.remove(this.getStorageKey(r))}await this.storage.clear(this.getStorageName()),this.dedupes.clear()}async get(e){const r=await this.storage.get(e);return this.transformer&&r?await this.transformer.deserialize(r):r}async set(e,r,n,i){return this.transformer&&(r=this.transformer.serialize(r)),this.storage.set(e,r,n,i)}async invalidate(e){return this.storage.invalidate(e)}}class ui{constructor(){this.promise=null}}function ke(){}on.Cache=class{constructor(t={}){if(!t.storage)throw new Error("storage is required");if(t.ttl&&typeof t.ttl=="number"&&(t.ttl<0||!Number.isInteger(t.ttl)))throw new Error("ttl must be a positive integer greater than 0");if(t.onDedupe&&typeof t.onDedupe!="function")throw new Error("onDedupe must be a function");if(t.onError&&typeof t.onError!="function")throw new Error("onError must be a function");if(t.onHit&&typeof t.onHit!="function")throw new Error("onHit must be a function");if(t.onMiss&&typeof t.onMiss!="function")throw new Error("onMiss must be a function");if(typeof t.stale=="number"&&!(Math.floor(t.stale)===t.stale&&t.stale>=0))throw new Error("stale must be an integer greater or equal to 0");this[Q]={},this[$r]=t.storage,this[xe]=new Map,this[xe].set("_default",t.storage),this[Cr]=t.transformer,this[kr]=t.ttl||0,this[Ar]=t.onDedupe||ke,this[Or]=t.onError||ke,this[Tr]=t.onHit||ke,this[Rr]=t.onMiss||ke,this[Pr]=t.stale||0}define(t,e,r){if(typeof e=="function"&&(r=e,e={}),t&&this[t])throw new Error(`${t} is already defined in the cache or it is a forbidden name`);if(e=e||{},typeof r!="function")throw new TypeError(`Missing the function parameter for '${t}'`);const n=e.serialize;if(n&&typeof n!="function")throw new TypeError("serialize must be a function");const i=e.references;if(i&&typeof i!="function")throw new TypeError("references must be a function");if(typeof e.ttl!="function"&&e.ttl&&(typeof e.ttl!="number"||e.ttl<0||!Number.isInteger(e.ttl)))throw new Error("ttl must be a positive integer greater than 0");let s;e.storage?(s=ai(e.storage.type,e.storage.options),this[xe].set(t,s)):s=this[$r];const o=e.ttl!==void 0?e.ttl:this[kr],a=e.stale!==void 0?e.stale:this[Pr],c=e.onDedupe||this[Ar],l=e.onError||this[Or],u=e.onHit||this[Tr],f=e.onMiss||this[Rr],d=e.transformer||this[Cr],y=new ci(r,t,n,i,s,d,o,c,l,u,f,a);return this[Q][t]=y,this[t]=y.add.bind(y),this}async clear(t,e){if(t){if(!this[Q][t])throw new Error(`${t} is not defined in the cache`);return void await this[Q][t].clear(e)}const r=[];for(const n of Object.values(this[Q]))r.push(n.clear());await Promise.all(r)}async get(t,e){if(!this[Q][t])throw new Error(`${t} is not defined in the cache`);return this[Q][t].get(e)}async set(t,e,r,n,i){if(!this[Q][t])throw new Error(`${t} is not defined in the cache`);return this[Q][t].set(e,r,n,i)}async invalidate(t,e){if(!this[Q][t])throw new Error(`${t} is not defined in the cache`);return this[Q][t].invalidate(e)}async invalidateAll(t,e="_default"){if(!this[xe].has(e))throw new Error(`${e} storage is not defined in the cache`);await this[xe].get(e).invalidate(t)}};const{Cache:xr}=on,Mr=dn;var li={Cache:xr,createCache:function(t){t?t.storage||(t.storage={type:"memory"}):t={storage:{type:"memory"}};const e=Mr(t.storage.type,t.storage.options);return new xr({...t,storage:e})},createStorage:Mr};let It=0,Ir=[],z=[],jr=(t,e)=>{let r=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),l:0,lc:0,listen:(i,s)=>(n.lc=r.push(i,s||n.l)/2,()=>{let o=r.indexOf(i);~o&&(r.splice(o,2),--n.lc||n.off())}),notify(i,s){let o=!z.length;for(let a=0;a<r.length;a+=2)z.push(r[a],r[a+1],n.value,i,s);if(o){for(let a=0;a<z.length;a+=5){let c;for(let l=a+1;!c&&(l+=5)<z.length;)z[l]<z[a+1]&&(c=z.push(z[a],z[a+1],z[a+2],z[a+3],z[a+4]));c||z[a](z[a+2],z[a+3],z[a+4])}z.length=0}},off(){},set(i){let s=n.value;s!==i&&(n.value=i,n.notify(s))},subscribe(i,s){let o=n.listen(i,s);return i(n.value),o},value:t};return n};const jt=typeof document>"u"?"server":"browser";function Fr(t){return t.withConfig({allowReconfigure:!1})}const fi=t=>{const{ssr:e=!1,tag:r="core-loader"}=t;if(e&&t.client)throw new TypeError("`client` option is not allowed when `ssr: true`, use `setServerClient` from your server entry point instead");if(!e&&t.client===!1)throw new TypeError("You must set `ssr: true` when `client: false` is used");if(!e&&!t.client)throw new TypeError("`client` is required");let n=e?void 0:Fr(t.client);function i(u){return li.createCache().define("fetch",async f=>{if(!u)throw new Error("You have to set the Sanity client with `setServerClient` before any data fetching is done");const{query:d,params:y={},perspective:h,useCdn:p}=JSON.parse(f),{result:m,resultSourceMap:v}=await u.fetch(d,y,{tag:r,filterResponse:!1,perspective:h,useCdn:p});return{result:m,resultSourceMap:v}})}function s(){const u=(n==null?void 0:n.config().perspective)||"published";return o.instance=i(n),{hydrate:(f,d,y)=>({loading:(y==null?void 0:y.data)===void 0||(y==null?void 0:y.sourceMap)===void 0,error:void 0,data:y==null?void 0:y.data,sourceMap:y==null?void 0:y.sourceMap,perspective:u}),fetch:(f,d,y,h)=>{if(h.signal.aborted)return;const p=(It+=1,()=>{if(It-=1,It===0){let m=Ir;Ir=[];for(let v of m)v()}});y.setKey("loading",!0),y.setKey("error",void 0),o.instance.fetch(JSON.stringify({query:f,params:d})).then(m=>{h.signal.aborted||(y.setKey("data",m.result),y.setKey("sourceMap",m.resultSourceMap),y.setKey("perspective",u))}).catch(m=>{y.setKey("error",m)}).finally(()=>{y.setKey("loading",!1),p()})}}}const o={instance:i(n)},a=jr(n?s():void 0),c=(u=>{const{ssr:f,setFetcher:d}=u;return y=>{if(jt==="server")throw new Error("Live mode is not supported in server environments");if(f&&!y.client)throw new Error("The `client` option in `enableLiveMode` is required");const h=y.client||u.client||void 0,p=new AbortController;let m;return Ct(async()=>{const{enableLiveMode:v}=await import("./enableLiveMode.BFjcDQu4.js");return{enableLiveMode:v}},__vite__mapDeps([0,1]),import.meta.url).then(({enableLiveMode:v})=>{p.signal.aborted||(m=v({...y,client:h,setFetcher:d,ssr:f}))}),()=>{p.abort(),m==null||m()}}})({client:n||void 0,ssr:e,setFetcher:u=>{const f=a.get();return a.set(u),()=>a.set(f)}}),l={instance:void 0,canPreviewDrafts:!1};return{createFetcherStore:(u,f={},d)=>{const y=a.get(),h=((_={})=>{let A=jr(_);return A.setKey=function(R,M){let x=A.value;typeof M>"u"&&R in A.value?(A.value={...A.value},delete A.value[R],A.notify(x,R)):A.value[R]!==M&&(A.value={...A.value,[R]:M},A.notify(x,R))},A})(y?y.hydrate(u,f,d):{loading:!1,error:typeof(d==null?void 0:d.data)>"u"?new Error("The `initial` option is required when `ssr: true`"):void 0,data:d==null?void 0:d.data,sourceMap:d==null?void 0:d.sourceMap,perspective:d==null?void 0:d.perspective});return m=()=>{let _=new AbortController;const A=a.subscribe(R=>{!R||_.signal.aborted||(_.abort(),_=new AbortController,R.fetch(u,f,h,_))});return()=>{_.abort(),A()}},k=_=>{let A=m(_);A&&p.events[6].push(A)},S=5,w=_=>{let A=p.listen;p.listen=(...M)=>(!p.lc&&!p.active&&(p.active=!0,_()),A(...M));let R=p.off;return p.events[6]=[],p.off=()=>{R(),setTimeout(()=>{if(p.active&&!p.lc){p.active=!1;for(let M of p.events[6])M();p.events[6]=[]}},1e3)},()=>{p.listen=A,p.off=R}},(v=p=h).events=v.events||{},v.events[S+10]||(v.events[S+10]=w(_=>{v.events[S].reduceRight((A,R)=>(R(A),A),{shared:{},..._})})),v.events[S]=v.events[S]||[],v.events[S].push(k),h;var p,m,v,k,S,w},enableLiveMode:c,setServerClient:u=>{if(jt!=="server")throw new Error("`setServerClient` can only be called in server environments, detected: "+JSON.stringify(jt));if(!e)throw new Error("`setServerClient` can only be called when `ssr: true`");l.instance=n=Fr(u),l.canPreviewDrafts=!!n.config().token,a.set(s())},unstable__cache:o,unstable__serverClient:l}};var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var di=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};const pi=hi(di);function Ot(t,e,r,n,i){var s,o,a,c,l,u;const f=i&&"input"in i?i.input:r.value,d=(s=i==null?void 0:i.expected)!=null?s:t.expects,y=(o=i==null?void 0:i.received)!=null?o:function(v){var k,S,w;let _=typeof v;return _==="object"&&(_=(w=v&&((S=(k=Object.getPrototypeOf(v))==null?void 0:k.constructor)==null?void 0:S.name))!=null?w:"null"),_==="string"?`"${v}"`:_==="number"||_==="bigint"||_==="boolean"?`${v}`:_}(f),h={kind:t.kind,type:t.type,input:f,expected:d,received:y,message:`Invalid ${e}: ${d?`Expected ${d} but r`:"R"}eceived ${y}`,requirement:t.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly,skipPipe:n.skipPipe},p=t.kind==="schema",m=(u=(l=(c=(a=t.message)!=null?a:function(v,k){var S;return(S=void 0)==null?void 0:S.get(k)}(t.reference,h.lang))!=null?c:p?(h.lang,void 0):null)!=null?l:n.message)!=null?u:function(v){}(h.lang);m&&(h.message=typeof m=="function"?m(h):m),p&&(r.typed=!1),r.issues?r.issues.push(h):r.issues=[h]}function yi(t){return t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function rr(t,e){return{kind:"schema",type:"object",reference:rr,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const o in this.entries){const a=s[o],c=this.entries[o]._run({typed:!1,value:a},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:o,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||o in s)&&(r.value[o]=c.value)}}else Ot(this,"type",r,n);return r}}}function Tt(t,...e){const r={kind:"schema",type:"optional",reference:Tt,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(n,i){return n.value===void 0&&("default"in this&&(n.value=function(s,o,a){return typeof s.default=="function"?s.default(o,a):s.default}(this,n,i)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,i)}};return 0 in e&&(r.default=e[0]),r}function Rt(t){return{kind:"schema",type:"string",reference:Rt,expects:"string",async:!1,message:t,_run(e,r){return typeof e.value=="string"?e.typed=!0:Ot(this,"type",e,r),e}}}function gi(t){return t!==null&&Array.isArray(t)}function mi(t){let e="";for(const r of t)typeof r!="string"?typeof r!="number"?gi(r)?(e&&(e+=":"),e+=`${r.join(",")}}`):r._key&&(e&&(e+=":"),e+=`${r._key}`):(e&&(e+=":"),e+=`${r}`):(e&&(e+="."),e+=r);return e}const Ae=function(...t){return{...t[0],pipe:t,_run(e,r){for(let n=0;n<t.length;n++){e=t[n]._run(e,r);const i=t[n+1];if(r.skipPipe||e.issues&&(r.abortEarly||r.abortPipeEarly||(i==null?void 0:i.kind)==="schema"||(i==null?void 0:i.kind)==="transformation")){e.typed=!1;break}}return e}}}(Rt(),function t(e,r){return{kind:"validation",type:"min_length",reference:t,async:!1,expects:`>=${e}`,requirement:e,message:r,_run(n,i){return n.typed&&n.value.length<this.requirement&&Ot(this,"length",n,i,{received:`${n.value.length}`}),n}}}(1)),Me=Tt(Ae),vi=rr({baseUrl:Ae,dataset:Me,id:Ae,path:Ae,projectId:Me,tool:Me,type:Me,workspace:Me,isDraft:Tt(Rt())});function wi(t){const{id:e,path:r,baseUrl:n,tool:i,workspace:s,type:o}=t;return a=t,vi._run({typed:!1,value:a},{abortEarly:!0}).issues?void 0:[["id",nn(e)],["type",o],["path",mi(er.fromString(r))],["base",encodeURIComponent(n)],["workspace",s],["tool",i],["isDraft",e.startsWith("drafts.")]].filter(([,c])=>!!c).map(c=>{const[l,u]=c;return u===!0?l:c.join("=")}).join(";");var a}rr({origin:Ae,href:Ae,data:Tt(function t(e,r,n){return{kind:"schema",type:"record",reference:t,expects:"Object",async:!1,key:e,value:r,message:n,_run(i,s){var o,a;const c=i.value;if(c&&typeof c=="object"){i.typed=!0,i.value={};for(const l in c)if(yi(l)){const u=c[l],f=this.key._run({typed:!1,value:l},s);if(f.issues){const y={type:"record",origin:"key",input:c,key:l,value:u};for(const h of f.issues)h.path=[y],(o=i.issues)==null||o.push(h);if(i.issues||(i.issues=f.issues),s.abortEarly){i.typed=!1;break}}const d=this.value._run({typed:!1,value:u},s);if(d.issues){const y={type:"record",origin:"value",input:c,key:l,value:u};for(const h of d.issues)h.path?h.path.unshift(y):h.path=[y],(a=i.issues)==null||a.push(h);if(i.issues||(i.issues=d.issues),s.abortEarly){i.typed=!1;break}}(!f.typed||!d.typed)&&(i.typed=!1),f.typed&&(i.value[f.value]=d.value)}}else Ot(this,"type",i,s);return i}}}(Rt(),function t(){return{kind:"schema",type:"unknown",reference:t,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}()))});const bi=(t,e,r,n)=>{if(!e||!r)return;const i=qs(n),s=Ns({resultPath:i,resultSourceMap:e,studioUrl:r});return s?wi({baseUrl:s.baseUrl,workspace:s.workspace,tool:s.tool,type:s.type,id:s.id,path:typeof s.path=="string"?s.path:er.toString(sn(s.path))}):void 0};function pn(t,e,r,n){const i=o=>o?typeof o=="string"?er.fromString(o):o:[],s=i(n);return Object.assign(o=>bi(0,e,r,[...s,...i(o)]),{scope:o=>pn(t,e,r,[...s,...i(o)])})}function _i(t,e,r){return pn(t,e,r)}const Ei=t=>{const{createFetcherStore:e,setServerClient:r,enableLiveMode:n,unstable__cache:i,unstable__serverClient:s}=fi({tag:"svelte-loader",...t}),o=(l=t.client,Nt(typeof l=="object"?l==null?void 0:l.config().stega.studioUrl:void 0)),a=function({createFetcherStore:u,studioUrlStore:f}){const d={},y={};return(h,p=d,m=y)=>{typeof h=="object"&&(p=h.params||d,m=h.options||y,h=h.query);const v=m.initial?{perspective:"published",...m.initial}:void 0,k=JSON.stringify(p),S=u(h,JSON.parse(k),v),w=Nt(S.value);return ks(()=>S.subscribe(_=>{const A=As(w);A.error!==_.error&&w.set(_),A.loading!==_.loading&&w.set(_),A.perspective!==_.perspective&&w.set(_),pi(A.data,_.data)||w.set(_)})),Cs([w,f],([_,A])=>({..._,encodeDataAttribute:_i(_.data,_.sourceMap,A)}))}}({createFetcherStore:e,studioUrlStore:o}),c=function({enableLiveMode:u,studioUrlStore:f}){return({allowStudioOrigin:d,client:y,onConnect:h,onDisconnect:p,studioUrl:m}={})=>(d&&console.warn("`allowStudioOrigin` is deprecated and no longer needed"),f.set(m??(typeof y=="object"?y==null?void 0:y.config().stega.studioUrl:void 0)),u({client:y,onConnect:h,onDisconnect:p}))}({enableLiveMode:n,studioUrlStore:o});var l;return{loadQuery:async(u,f={},d={})=>{var y;const{headers:h,tag:p}=d,m=d.perspective||((y=s.instance)==null?void 0:y.config().perspective)||"published";if(typeof document<"u")throw new Error("Cannot use `loadQuery` in a browser environment, you should use it inside a loader, getStaticProps, getServerSideProps, getInitialProps, or in a React Server Component.");if(m!=="published"&&!s.instance)throw new Error('You cannot use other perspectives than "published" unless you set "ssr: true" and call "setServerClient" first.');if(m==="previewDrafts"){if(!s.canPreviewDrafts)throw new Error('You cannot use "previewDrafts" unless you set a "token" in the "client" instance passed to "setServerClient".');const{result:w,resultSourceMap:_}=await s.instance.fetch(u,f,{filterResponse:!1,resultSourceMap:"withKeyArraySelector",perspective:m,useCdn:!1,headers:h,tag:p});return{data:w,sourceMap:_,perspective:m}}const v=d.useCdn||s.instance.config().useCdn,{result:k,resultSourceMap:S}=await i.instance.fetch(JSON.stringify({query:u,params:f,perspective:m,useCdn:v}));return S?{data:k,sourceMap:S}:{data:k}},useQuery:a,setServerClient:r,useLiveMode:c,unstable__serverClient:s}},{loadQuery:Oc,setServerClient:Tc,useLiveMode:Rc,useQuery:Pc,unstable__serverClient:xc}=Ei({client:!1,ssr:!0}),yn=Nt(!1);$s(yn);yn.set;const gn=typeof navigator>"u"?!1:navigator.product==="ReactNative",mn={timeout:gn?6e4:12e4},Si=function(t){const e={...mn,...typeof t=="string"?{url:t}:t};if(e.timeout=vn(e.timeout),e.query){const{url:r,searchParams:n}=$i(e.url);for(const[i,s]of Object.entries(e.query)){if(s!==void 0)if(Array.isArray(s))for(const a of s)n.append(i,a);else n.append(i,s);const o=n.toString();o&&(e.url=`${r}?${o}`)}}return e.method=e.body&&!e.method?"POST":(e.method||"GET").toUpperCase(),e};function $i(t){const e=t.indexOf("?");if(e===-1)return{url:t,searchParams:new URLSearchParams};const r=t.slice(0,e),n=t.slice(e+1);if(!gn)return{url:r,searchParams:new URLSearchParams(n)};if(typeof decodeURIComponent!="function")throw new Error("Broken `URLSearchParams` implementation, and `decodeURIComponent` is not defined");const i=new URLSearchParams;for(const s of n.split("&")){const[o,a]=s.split("=");o&&i.append(qr(o),qr(a||""))}return{url:r,searchParams:i}}function qr(t){return decodeURIComponent(t.replace(/\+/g," "))}function vn(t){if(t===!1||t===0)return!1;if(t.connect||t.socket)return t;const e=Number(t);return isNaN(e)?vn(mn.timeout):{connect:e,socket:e}}const Ci=/^https?:\/\//i,ki=function(t){if(!Ci.test(t.url))throw new Error(`"${t.url}" is not a valid URL`)};function Ai(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const Oi=t=>function(e,r,...n){const i=e==="onError";let s=r;for(let o=0;o<t[e].length;o++){const a=t[e][o];if(s=a(s,...n),i&&!s)break}return s};function Ti(){const t=Object.create(null);let e=0;function r(i){const s=e++;return t[s]=i,function(){delete t[s]}}function n(i){for(const s in t)t[s](i)}return{publish:n,subscribe:r}}const Ri=["request","response","progress","error","abort"],Lr=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function wn(t,e){const r=[],n=Lr.reduce((s,o)=>(s[o]=s[o]||[],s),{processOptions:[Si],validateOptions:[ki]});function i(s){const o=(h,p,m)=>{let v=h,k=p;if(!v)try{k=c("onResponse",p,m)}catch(S){k=null,v=S}v=v&&c("onError",v,m),v?a.error.publish(v):k&&a.response.publish(k)},a=Ri.reduce((h,p)=>(h[p]=Ti(),h),{}),c=Oi(n),l=c("processOptions",s);c("validateOptions",l);const u={options:l,channels:a,applyMiddleware:c};let f;const d=a.request.subscribe(h=>{f=e(h,(p,m)=>o(p,m,h))});a.abort.subscribe(()=>{d(),f&&f.abort()});const y=c("onReturn",a,u);return y===a&&a.request.publish(u),y}return i.use=function(s){if(!s)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof s=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(s.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return Lr.forEach(o=>{s[o]&&n[o].push(s[o])}),r.push(s),i},i.clone=()=>wn(r,e),t.forEach(i.use),i}var Ft=function(t){return t.replace(/^\s+|\s+$/g,"")},Pi=function(t){return Object.prototype.toString.call(t)==="[object Array]"},xi=function(t){if(!t)return{};for(var e={},r=Ft(t).split(`
`),n=0;n<r.length;n++){var i=r[n],s=i.indexOf(":"),o=Ft(i.slice(0,s)).toLowerCase(),a=Ft(i.slice(s+1));typeof e[o]>"u"?e[o]=a:Pi(e[o])?e[o].push(a):e[o]=[e[o],a]}return e},Mi=Ai(xi),Ii=Object.defineProperty,bn=t=>{throw TypeError(t)},ji=(t,e,r)=>e in t?Ii(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X=(t,e,r)=>ji(t,typeof e!="symbol"?e+"":e,r),_n=(t,e,r)=>e.has(t)||bn("Cannot "+r),G=(t,e,r)=>(_n(t,e,"read from private field"),r?r.call(t):e.get(t)),he=(t,e,r)=>e.has(t)?bn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ie=(t,e,r,n)=>(_n(t,e,"write to private field"),e.set(t,r),r),Xe,Ze,Ee,et,oe,tt,rt;class Vt{constructor(){X(this,"onabort"),X(this,"onerror"),X(this,"onreadystatechange"),X(this,"ontimeout"),X(this,"readyState",0),X(this,"response"),X(this,"responseText",""),X(this,"responseType",""),X(this,"status"),X(this,"statusText"),X(this,"withCredentials"),he(this,Xe),he(this,Ze),he(this,Ee),he(this,et,{}),he(this,oe),he(this,tt,{}),he(this,rt)}open(e,r,n){var i;ie(this,Xe,e),ie(this,Ze,r),ie(this,Ee,""),this.readyState=1,(i=this.onreadystatechange)==null||i.call(this),ie(this,oe,void 0)}abort(){G(this,oe)&&G(this,oe).abort()}getAllResponseHeaders(){return G(this,Ee)}setRequestHeader(e,r){G(this,et)[e]=r}setInit(e,r=!0){ie(this,tt,e),ie(this,rt,r)}send(e){const r=this.responseType!=="arraybuffer",n={...G(this,tt),method:G(this,Xe),headers:G(this,et),body:e};typeof AbortController=="function"&&G(this,rt)&&(ie(this,oe,new AbortController),typeof EventTarget<"u"&&G(this,oe).signal instanceof EventTarget&&(n.signal=G(this,oe).signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(G(this,Ze),n).then(i=>{var s;return i.headers.forEach((o,a)=>{ie(this,Ee,G(this,Ee)+`${a}: ${o}\r
`)}),this.status=i.status,this.statusText=i.statusText,this.readyState=3,(s=this.onreadystatechange)==null||s.call(this),r?i.text():i.arrayBuffer()}).then(i=>{var s;typeof i=="string"?this.responseText=i:this.response=i,this.readyState=4,(s=this.onreadystatechange)==null||s.call(this)}).catch(i=>{var s,o;if(i.name==="AbortError"){(s=this.onabort)==null||s.call(this);return}(o=this.onerror)==null||o.call(this,i)})}}Xe=new WeakMap,Ze=new WeakMap,Ee=new WeakMap,et=new WeakMap,oe=new WeakMap,tt=new WeakMap,rt=new WeakMap;const Ht=typeof XMLHttpRequest=="function"?"xhr":"fetch",Fi=Ht==="xhr"?XMLHttpRequest:Vt,qi=(t,e)=>{var r;const n=t.options,i=t.applyMiddleware("finalizeOptions",n),s={},o=t.applyMiddleware("interceptRequest",void 0,{adapter:Ht,context:t});if(o){const w=setTimeout(e,0,null,o);return{abort:()=>clearTimeout(w)}}let a=new Fi;a instanceof Vt&&typeof i.fetch=="object"&&a.setInit(i.fetch,(r=i.useAbortSignal)!=null?r:!0);const c=i.headers,l=i.timeout;let u=!1,f=!1,d=!1;if(a.onerror=w=>{a instanceof Vt?v(w instanceof Error?w:new Error(`Request error while attempting to reach is ${i.url}`,{cause:w})):v(new Error(`Request error while attempting to reach is ${i.url}${w.lengthComputable?`(${w.loaded} of ${w.total} bytes transferred)`:""}`))},a.ontimeout=w=>{v(new Error(`Request timeout while attempting to reach ${i.url}${w.lengthComputable?`(${w.loaded} of ${w.total} bytes transferred)`:""}`))},a.onabort=()=>{m(!0),u=!0},a.onreadystatechange=()=>{p(),!(u||a.readyState!==4)&&a.status!==0&&S()},a.open(i.method,i.url,!0),a.withCredentials=!!i.withCredentials,c&&a.setRequestHeader)for(const w in c)c.hasOwnProperty(w)&&a.setRequestHeader(w,c[w]);return i.rawBody&&(a.responseType="arraybuffer"),t.applyMiddleware("onRequest",{options:i,adapter:Ht,request:a,context:t}),a.send(i.body||null),l&&(s.connect=setTimeout(()=>h("ETIMEDOUT"),l.connect)),{abort:y};function y(){u=!0,a&&a.abort()}function h(w){d=!0,a.abort();const _=new Error(w==="ESOCKETTIMEDOUT"?`Socket timed out on request to ${i.url}`:`Connection timed out on request to ${i.url}`);_.code=w,t.channels.error.publish(_)}function p(){l&&(m(),s.socket=setTimeout(()=>h("ESOCKETTIMEDOUT"),l.socket))}function m(w){(w||u||a.readyState>=2&&s.connect)&&clearTimeout(s.connect),s.socket&&clearTimeout(s.socket)}function v(w){if(f)return;m(!0),f=!0,a=null;const _=w||new Error(`Network error while attempting to reach ${i.url}`);_.isNetworkError=!0,_.request=i,e(_)}function k(){return{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:i.url,method:i.method,headers:Mi(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText}}function S(){if(!(u||f||d)){if(a.status===0){v(new Error("Unknown XHR error"));return}m(),f=!0,e(null,k())}}},Li=(t=[],e=qi)=>wn(t,e);var Di={},Dr={exports:{}},qt,Ur;function Ui(){if(Ur)return qt;Ur=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;qt=function(u,f){f=f||{};var d=typeof u;if(d==="string"&&u.length>0)return o(u);if(d==="number"&&isFinite(u))return f.long?c(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var d=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return d*s;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(u){var f=Math.abs(u);return f>=n?Math.round(u/n)+"d":f>=r?Math.round(u/r)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var f=Math.abs(u);return f>=n?l(u,f,n,"day"):f>=r?l(u,f,r,"hour"):f>=e?l(u,f,e,"minute"):f>=t?l(u,f,t,"second"):u+" ms"}function l(u,f,d,y){var h=f>=d*1.5;return Math.round(u/d)+" "+y+(h?"s":"")}return qt}function Ni(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Ui(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,d=null,y,h;function p(...m){if(!p.enabled)return;const v=p,k=Number(new Date),S=k-(f||k);v.diff=S,v.prev=f,v.curr=k,f=k,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let w=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(_,A)=>{if(_==="%%")return"%";w++;const R=r.formatters[A];if(typeof R=="function"){const M=m[w];_=R.call(v,M),m.splice(w,1),w--}return _}),r.formatArgs.call(v,m),(v.log||r.log).apply(v,m)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(y!==r.namespaces&&(y=r.namespaces,h=r.enabled(u)),h),set:m=>{d=m}}),typeof r.init=="function"&&r.init(p),p}function n(u,f){const d=r(this.namespace+(typeof f>"u"?":":f)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f;const d=(typeof u=="string"?u:"").split(/[\s,]+/),y=d.length;for(f=0;f<y;f++)d[f]&&(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(u))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var zi=Ni;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let u=0,f=0;c[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(u++,d==="%c"&&(f=u))}),c.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=Di.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=zi(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(Dr,Dr.exports);const Ki=typeof Buffer>"u"?()=>!1:t=>Buffer.isBuffer(t);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Nr(t){return Object.prototype.toString.call(t)==="[object Object]"}function Wi(t){if(Nr(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(Nr(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)}const Vi=["boolean","string","number"];function Hi(){return{processOptions:t=>{const e=t.body;return!e||!(typeof e.pipe!="function"&&!Ki(e)&&(Vi.indexOf(typeof e)!==-1||Array.isArray(e)||Wi(e)))?t:Object.assign({},t,{body:JSON.stringify(t.body),headers:Object.assign({},t.headers,{"Content-Type":"application/json"})})}}}function Bi(t){return{onResponse:r=>{const n=r.headers["content-type"]||"",i=n.indexOf("application/json")!==-1;return!r.body||!n||!i?r:Object.assign({},r,{body:e(r.body)})},processOptions:r=>Object.assign({},r,{headers:Object.assign({Accept:"application/json"},r.headers)})};function e(r){try{return JSON.parse(r)}catch(n){throw n.message=`Failed to parsed response body as JSON: ${n.message}`,n}}}let Fe={};typeof globalThis<"u"?Fe=globalThis:typeof window<"u"?Fe=window:typeof global<"u"?Fe=global:typeof self<"u"&&(Fe=self);var Ji=Fe;function Gi(t={}){const e=t.implementation||Ji.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(r,n)=>new e(i=>(r.error.subscribe(s=>i.error(s)),r.progress.subscribe(s=>i.next(Object.assign({type:"progress"},s))),r.response.subscribe(s=>{i.next(Object.assign({type:"response"},s)),i.complete()}),r.request.publish(n),()=>r.abort.publish()))}}function Yi(){return{onRequest:t=>{if(t.adapter!=="xhr")return;const e=t.request,r=t.context;"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=n("upload")),"onprogress"in e&&(e.onprogress=n("download"));function n(i){return s=>{const o=s.lengthComputable?s.loaded/s.total*100:-1;r.channels.progress.publish({stage:i,percent:o,total:s.total,loaded:s.loaded,lengthComputable:s.lengthComputable})}}}}}var Qi=Object.defineProperty,Xi=(t,e,r)=>e in t?Qi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ve=(t,e,r)=>Xi(t,typeof e!="symbol"?e+"":e,r);class Zi{constructor(e){Ve(this,"__CANCEL__",!0),Ve(this,"message"),this.message=e}toString(){return`Cancel${this.message?`: ${this.message}`:""}`}}const zr=class{constructor(t){if(Ve(this,"promise"),Ve(this,"reason"),typeof t!="function")throw new TypeError("executor must be a function.");let e=null;this.promise=new Promise(r=>{e=r}),t(r=>{this.reason||(this.reason=new Zi(r),e(this.reason))})}};Ve(zr,"source",()=>{let t;return{token:new zr(e=>{t=e}),cancel:t}});var En=(t,e,r)=>r.method!=="GET"&&r.method!=="HEAD"?!1:t.isNetworkError||!1;const eo=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";var to=t=>{const e=t.maxRetries||5,r=t.retryDelay||ro,n=t.shouldRetry;return{onError:(i,s)=>{const o=s.options,a=o.maxRetries||e,c=o.retryDelay||r,l=o.shouldRetry||n,u=o.attemptNumber||0;if(eo(o.body)||!l(i,u,o)||u>=a)return i;const f=Object.assign({},s,{options:Object.assign({},o,{attemptNumber:u+1})});return setTimeout(()=>s.channels.request.publish(f),c(u)),null}}};function ro(t){return 100*Math.pow(2,t)+Math.random()*100}const nr=(t={})=>to({shouldRetry:En,...t});nr.shouldRetry=En;var Bt=function(t,e){return Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Bt(t,e)};function sr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Bt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function no(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(f){o(f)}}function c(u){try{l(n.throw(u))}catch(f){o(f)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Sn(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function He(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function be(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Oe(t){return this instanceof Oe?(this.v=t,this):new Oe(t)}function so(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(h){return Promise.resolve(h).then(y,f)}}function a(y,h){n[y]&&(i[y]=function(p){return new Promise(function(m,v){s.push([y,p,m,v])>1||c(y,p)})},h&&(i[y]=h(i[y])))}function c(y,h){try{l(n[y](h))}catch(p){d(s[0][3],p)}}function l(y){y.value instanceof Oe?Promise.resolve(y.value.v).then(u,f):d(s[0][2],y)}function u(y){c("next",y)}function f(y){c("throw",y)}function d(y,h){y(h),s.shift(),s.length&&c(s[0][0],s[0][1])}}function io(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof He=="function"?He(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function K(t){return typeof t=="function"}function $n(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Lt=$n(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Kr(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var ir=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=He(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(K(u))try{u()}catch(p){s=p instanceof Lt?p.errors:[p]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=He(f),y=d.next();!y.done;y=d.next()){var h=y.value;try{Wr(h)}catch(p){s=s??[],p instanceof Lt?s=be(be([],we(s)),we(p.errors)):s.push(p)}}}catch(p){n={error:p}}finally{try{y&&!y.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}if(s)throw new Lt(s)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)Wr(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Kr(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&Kr(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();ir.EMPTY;function Cn(t){return t instanceof ir||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function Wr(t){K(t)?t():t.unsubscribe()}var kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},An={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,be([t,e],we(r)))},clearTimeout:function(t){var e=An.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function On(t){An.setTimeout(function(){throw t})}function Vr(){}function oo(t){t()}var or=function(t){sr(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Cn(r)&&r.add(n)):n.destination=lo,n}return e.create=function(r,n,i){return new Jt(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ir),ao=Function.prototype.bind;function Dt(t,e){return ao.call(t,e)}var co=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Qe(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Qe(n)}else Qe(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Qe(r)}},t}(),Jt=function(t){sr(e,t);function e(r,n,i){var s=t.call(this)||this,o;if(K(r)||!r)o={next:r??void 0,error:n??void 0,complete:i??void 0};else{var a;s&&kn.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return s.unsubscribe()},o={next:r.next&&Dt(r.next,a),error:r.error&&Dt(r.error,a),complete:r.complete&&Dt(r.complete,a)}):o=r}return s.destination=new co(o),s}return e}(or);function Qe(t){On(t)}function uo(t){throw t}var lo={closed:!0,next:Vr,error:uo,complete:Vr},ar=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Tn(t){return t}function fo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Rn(t)}function Rn(t){return t.length===0?Tn:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Y=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,s=po(e)?e:new Jt(e,r,n);return oo(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Hr(r),new r(function(i,s){var o=new Jt({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});n.subscribe(o)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[ar]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Rn(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Hr(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function Hr(t){var e;return(e=t??kn.Promise)!==null&&e!==void 0?e:Promise}function ho(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function po(t){return t&&t instanceof or||ho(t)&&Cn(t)}function yo(t){return K(t==null?void 0:t.lift)}function cr(t){return function(e){if(yo(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ur(t,e,r,n,i){return new go(t,e,r,n,i)}var go=function(t){sr(e,t);function e(r,n,i,s,o,a){var c=t.call(this,r)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=n?function(l){try{n(l)}catch(u){r.error(u)}}:t.prototype._next,c._error=s?function(l){try{s(l)}catch(u){r.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){r.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e}(or);function mo(t){return t[t.length-1]}function vo(t){return K(mo(t))?t.pop():void 0}var wo=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function bo(t){return K(t==null?void 0:t.then)}function _o(t){return K(t[ar])}function Eo(t){return Symbol.asyncIterator&&K(t==null?void 0:t[Symbol.asyncIterator])}function So(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function $o(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Co=$o();function ko(t){return K(t==null?void 0:t[Co])}function Ao(t){return so(this,arguments,function(){var r,n,i,s;return Sn(this,function(o){switch(o.label){case 0:r=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Oe(r.read())];case 3:return n=o.sent(),i=n.value,s=n.done,s?[4,Oe(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Oe(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function Oo(t){return K(t==null?void 0:t.getReader)}function To(t){if(t instanceof Y)return t;if(t!=null){if(_o(t))return Ro(t);if(wo(t))return Po(t);if(bo(t))return xo(t);if(Eo(t))return Pn(t);if(ko(t))return Mo(t);if(Oo(t))return Io(t)}throw So(t)}function Ro(t){return new Y(function(e){var r=t[ar]();if(K(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Po(t){return new Y(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function xo(t){return new Y(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,On)})}function Mo(t){return new Y(function(e){var r,n;try{for(var i=He(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()})}function Pn(t){return new Y(function(e){jo(t,e).catch(function(r){return e.error(r)})})}function Io(t){return Pn(Ao(t))}function jo(t,e){var r,n,i,s;return no(this,void 0,void 0,function(){var o,a;return Sn(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=io(t),c.label=1;case 1:return[4,r.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function xn(t,e){return To(t)}var Fo=$n(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function N(t,e){return new Promise(function(r,n){var i=!1,s;t.subscribe({next:function(o){s=o,i=!0},error:n,complete:function(){i?r(s):n(new Fo)}})})}function ne(t,e){return cr(function(r,n){var i=0;r.subscribe(ur(n,function(s){n.next(t.call(e,s,i++))}))})}var qo=Array.isArray;function Lo(t,e){return qo(e)?t.apply(void 0,be([],we(e))):t(e)}function Do(t){return ne(function(e){return Lo(t,e)})}function Uo(t,e,r){return r===void 0&&(r=Tn),function(n){Br(e,function(){for(var i=t.length,s=new Array(i),o=i,a=i,c=function(u){Br(e,function(){var f=xn(t[u]),d=!1;f.subscribe(ur(n,function(y){s[u]=y,d||(d=!0,a--),a||n.next(r(s.slice()))},function(){--o||n.complete()}))},n)},l=0;l<i;l++)c(l)})}}function Br(t,e,r){e()}var No=Array.isArray;function zo(t){return t.length===1&&No(t[0])?t[0]:t}function Be(t,e){return cr(function(r,n){var i=0;r.subscribe(ur(n,function(s){return t.call(e,s,i++)&&n.next(s)}))})}function Mn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=vo(t);return r?fo(Mn.apply(void 0,be([],we(t))),Do(r)):cr(function(n,i){Uo(be([n],we(zo(t))))(i)})}function Ko(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mn.apply(void 0,be([],we(t)))}var In={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},lr={0:8203,1:8204,2:8205,3:65279},Wo=new Array(4).fill(String.fromCodePoint(lr[0])).join("");function Vo(t){let e=JSON.stringify(t);return`${Wo}${Array.from(e).map(r=>{let n=r.charCodeAt(0);if(n>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${e} on character ${r} (${n})`);return Array.from(n.toString(4).padStart(4,"0")).map(i=>String.fromCodePoint(lr[i])).join("")}).join("")}`}function Ho(t){return!Number.isNaN(Number(t))||/[a-z]/i.test(t)&&!/\d+(?:[-:\/]\d+){2}(?:T\d+(?:[-:\/]\d+){1,2}(\.\d+)?Z?)?/.test(t)?!1:!!Date.parse(t)}function Bo(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}function Mc(t,e,r="auto"){return r===!0||r==="auto"&&(Ho(t)||Bo(t))?t:`${t}${Vo(e)}`}Object.fromEntries(Object.entries(lr).map(t=>t.reverse()));Object.fromEntries(Object.entries(In).map(t=>t.reverse()));var Jo=`${Object.values(In).map(t=>`\\u{${t.toString(16)}}`).join("")}`,Jr=new RegExp(`[${Jo}]{4,}`,"gu");function Go(t){var e;return{cleaned:t.replace(Jr,""),encoded:((e=t.match(Jr))==null?void 0:e[0])||""}}function Yo(t){return t&&JSON.parse(Go(JSON.stringify(t)).cleaned)}function Qo(t){return Yo(t)}var Xo=Object.defineProperty,Zo=(t,e,r)=>e in t?Xo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ue=(t,e,r)=>(Zo(t,typeof e!="symbol"?e+"":e,r),r);class ea extends Error{constructor(e){const r=jn(e);super(r.message),ue(this,"response"),ue(this,"statusCode",400),ue(this,"responseBody"),ue(this,"details"),Object.assign(this,r)}}class ta extends Error{constructor(e){const r=jn(e);super(r.message),ue(this,"response"),ue(this,"statusCode",500),ue(this,"responseBody"),ue(this,"details"),Object.assign(this,r)}}function jn(t){const e=t.body,r={response:t,statusCode:t.statusCode,responseBody:ia(e,t),message:"",details:void 0};if(e.error&&e.message)return r.message=`${e.error} - ${e.message}`,r;if(ra(e)||na(e)){const n=e.error.items||[],i=n.slice(0,5).map(o=>{var a;return(a=o.error)==null?void 0:a.description}).filter(Boolean);let s=i.length?`:
- ${i.join(`
- `)}`:"";return n.length>5&&(s+=`
...and ${n.length-5} more`),r.message=`${e.error.description}${s}`,r.details=e.error,r}return e.error&&e.error.description?(r.message=e.error.description,r.details=e.error,r):(r.message=e.error||e.message||sa(t),r)}function ra(t){return ft(t)&&ft(t.error)&&t.error.type==="mutationError"&&typeof t.error.description=="string"}function na(t){return ft(t)&&ft(t.error)&&t.error.type==="actionError"&&typeof t.error.description=="string"}function ft(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function sa(t){const e=t.statusMessage?` ${t.statusMessage}`:"";return`${t.method}-request to ${t.url} resulted in HTTP ${t.statusCode}${e}`}function ia(t,e){return(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(t,null,2):t}const oa={onResponse:t=>{if(t.statusCode>=500)throw new ta(t);if(t.statusCode>=400)throw new ea(t);return t}},aa={onResponse:t=>{const e=t.headers["x-sanity-warning"];return(Array.isArray(e)?e:[e]).filter(Boolean).forEach(r=>console.warn(r)),t}};function ca(t){return Li([nr({shouldRetry:ua}),...t,aa,Hi(),Bi(),Yi(),oa,Gi({implementation:Y})])}function ua(t,e,r){if(r.maxRetries===0)return!1;const n=r.method==="GET"||r.method==="HEAD",i=(r.uri||r.url).startsWith("/data/query"),s=t.response&&(t.response.statusCode===429||t.response.statusCode===502||t.response.statusCode===503);return(n||i)&&s?!0:nr.shouldRetry(t,e,r)}function Fn(t){if(typeof t=="string")return{id:t};if(Array.isArray(t))return{query:"*[_id in $ids]",params:{ids:t}};if(typeof t=="object"&&t!==null&&"query"in t&&typeof t.query=="string")return"params"in t&&typeof t.params=="object"&&t.params!==null?{query:t.query,params:t.params}:{query:t.query};const e=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

${e}`)}const Gr=["image","file"],Yr=["before","after","replace"],qn=t=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(t))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},la=t=>{if(!/^[-a-z0-9]+$/i.test(t))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},fa=t=>{if(Gr.indexOf(t)===-1)throw new Error(`Invalid asset type: ${t}. Must be one of ${Gr.join(", ")}`)},Ne=(t,e)=>{if(e===null||typeof e!="object"||Array.isArray(e))throw new Error(`${t}() takes an object of properties`)},Ln=(t,e)=>{if(typeof e!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(e)||e.includes(".."))throw new Error(`${t}(): "${e}" is not a valid document ID`)},ht=(t,e)=>{if(!e._id)throw new Error(`${t}() requires that the document contains an ID ("_id" property)`);Ln(t,e._id)},ha=(t,e,r)=>{const n="insert(at, selector, items)";if(Yr.indexOf(t)===-1){const i=Yr.map(s=>`"${s}"`).join(", ");throw new Error(`${n} takes an "at"-argument which is one of: ${i}`)}if(typeof e!="string")throw new Error(`${n} takes a "selector"-argument which must be a string`);if(!Array.isArray(r))throw new Error(`${n} takes an "items"-argument which must be an array`)},Dn=t=>{if(!t.dataset)throw new Error("`dataset` must be provided to perform queries");return t.dataset||""},Un=t=>{if(typeof t!="string"||!/^[a-z0-9._-]{1,75}$/i.test(t))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return t};var da=Object.defineProperty,pa=(t,e,r)=>e in t?da(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qr=(t,e,r)=>(pa(t,typeof e!="symbol"?e+"":e,r),r),Nn=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Te=(t,e,r)=>(Nn(t,e,"read from private field"),r?r.call(t):e.get(t)),zn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Kn=(t,e,r,n)=>(Nn(t,e,"write to private field"),e.set(t,r),r);class Wn{constructor(e,r={}){Qr(this,"selection"),Qr(this,"operations"),this.selection=e,this.operations=r}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return Ne("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,r,n){return ha(e,r,n),this._assign("insert",{[e]:r,items:n})}append(e,r){return this.insert("after",`${e}[-1]`,r)}prepend(e,r){return this.insert("before",`${e}[0]`,r)}splice(e,r,n,i){const s=typeof n>"u"||n===-1,o=r<0?r-1:r,a=s?-1:Math.max(0,r+n),c=o<0&&a>=0?"":a,l=`${e}[${o}:${c}]`;return this.insert("replace",l,i||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...Fn(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,r,n=!0){return Ne(e,r),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},n&&this.operations[e]||{},r)}),this}_set(e,r){return this._assign(e,r,!1)}}var Se;const ya=class Vn extends Wn{constructor(e,r,n){super(e,r),zn(this,Se,void 0),Kn(this,Se,n)}clone(){return new Vn(this.selection,{...this.operations},Te(this,Se))}commit(e){if(!Te(this,Se))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return Te(this,Se).mutate({patch:this.serialize()},n)}};Se=new WeakMap;let ze=ya;var $e;const ga=class Hn extends Wn{constructor(e,r,n){super(e,r),zn(this,$e,void 0),Kn(this,$e,n)}clone(){return new Hn(this.selection,{...this.operations},Te(this,$e))}commit(e){if(!Te(this,$e))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const r=typeof this.selection=="string",n=Object.assign({returnFirst:r,returnDocuments:!0},e);return Te(this,$e).mutate({patch:this.serialize()},n)}};$e=new WeakMap;let Ke=ga;var ma=Object.defineProperty,va=(t,e,r)=>e in t?ma(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xr=(t,e,r)=>(va(t,typeof e!="symbol"?e+"":e,r),r),Bn=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},le=(t,e,r)=>(Bn(t,e,"read from private field"),r?r.call(t):e.get(t)),Jn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Gn=(t,e,r,n)=>(Bn(t,e,"write to private field"),e.set(t,r),r);const Yn={returnDocuments:!1};class Qn{constructor(e=[],r){Xr(this,"operations"),Xr(this,"trxId"),this.operations=e,this.trxId=r}create(e){return Ne("create",e),this._add({create:e})}createIfNotExists(e){const r="createIfNotExists";return Ne(r,e),ht(r,e),this._add({[r]:e})}createOrReplace(e){const r="createOrReplace";return Ne(r,e),ht(r,e),this._add({[r]:e})}delete(e){return Ln("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}var de;const wa=class Xn extends Qn{constructor(e,r,n){super(e,n),Jn(this,de,void 0),Gn(this,de,r)}clone(){return new Xn([...this.operations],le(this,de),this.trxId)}commit(e){if(!le(this,de))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return le(this,de).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Yn,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof Ke)return this._add({patch:e.serialize()});if(n){const i=r(new Ke(e,{},le(this,de)));if(!(i instanceof Ke))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:i.serialize()})}return this._add({patch:{id:e,...r}})}};de=new WeakMap;let Zn=wa;var pe;const ba=class es extends Qn{constructor(e,r,n){super(e,n),Jn(this,pe,void 0),Gn(this,pe,r)}clone(){return new es([...this.operations],le(this,pe),this.trxId)}commit(e){if(!le(this,pe))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return le(this,pe).mutate(this.serialize(),Object.assign({transactionId:this.trxId},Yn,e||{}))}patch(e,r){const n=typeof r=="function";if(typeof e!="string"&&e instanceof ze)return this._add({patch:e.serialize()});if(n){const i=r(new ze(e,{},le(this,pe)));if(!(i instanceof ze))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:i.serialize()})}return this._add({patch:{id:e,...r}})}};pe=new WeakMap;let ts=ba;const _a="https://www.sanity.io/help/";function fr(t){return _a+t}function Ea(t){let e=!1,r;return(...n)=>(e||(r=t(...n),e=!0),r)}const Je=t=>Ea((...e)=>console.warn(t.join(" "),...e)),Sa=Je(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),$a=Je(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),Ca=Je(["The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),ka=Je(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.",`See ${fr("js-client-browser-token")} for more information and how to hide this warning.`]),Aa=Je(["Using the Sanity client without specifying an API version is deprecated.",`See ${fr("js-client-api-version")}`]),Oa="apicdn.sanity.io",We={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}},Ta=["localhost","127.0.0.1","0.0.0.0"],Ra=t=>Ta.indexOf(t)!==-1;function Pa(t){if(t==="1"||t==="X")return;const e=new Date(t);if(!(/^\d{4}-\d{2}-\d{2}$/.test(t)&&e instanceof Date&&e.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}const rs=function(t){switch(t){case"previewDrafts":case"published":case"raw":return;default:throw new TypeError("Invalid API perspective string, expected `published`, `previewDrafts` or `raw`")}},ns=(t,e)=>{const r={...e,...t,stega:{...typeof e.stega=="boolean"?{enabled:e.stega}:e.stega||We.stega,...typeof t.stega=="boolean"?{enabled:t.stega}:t.stega||{}}};r.apiVersion||Aa();const n={...We,...r},i=n.useProjectHostname;if(typeof Promise>"u"){const f=fr("js-client-promise-polyfill");throw new Error(`No native Promise-implementation found, polyfill needed - see ${f}`)}if(i&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(typeof n.perspective=="string"&&rs(n.perspective),"encodeSourceMap"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if(typeof n.stega.enabled!="boolean")throw new Error(`stega.enabled must be a boolean, received ${n.stega.enabled}`);if(n.stega.enabled&&n.stega.studioUrl===void 0)throw new Error("stega.studioUrl must be defined when stega.enabled is true");if(n.stega.enabled&&typeof n.stega.studioUrl!="string"&&typeof n.stega.studioUrl!="function")throw new Error(`stega.studioUrl must be a string or a function, received ${n.stega.studioUrl}`);const s=typeof window<"u"&&window.location&&window.location.hostname,o=s&&Ra(window.location.hostname);s&&o&&n.token&&n.ignoreBrowserTokenWarning!==!0?ka():typeof n.useCdn>"u"&&$a(),i&&la(n.projectId),n.dataset&&qn(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?Un(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion=`${n.apiVersion}`.replace(/^v/,""),n.isDefaultApi=n.apiHost===We.apiHost,n.useCdn===!0&&n.withCredentials&&Sa(),n.useCdn=n.useCdn!==!1&&!n.withCredentials,Pa(n.apiVersion);const a=n.apiHost.split("://",2),c=a[0],l=a[1],u=n.isDefaultApi?Oa:l;return n.useProjectHostname?(n.url=`${c}://${n.projectId}.${l}/v${n.apiVersion}`,n.cdnUrl=`${c}://${n.projectId}.${u}/v${n.apiVersion}`):(n.url=`${n.apiHost}/v${n.apiVersion}`,n.cdnUrl=n.url),n},xa="X-Sanity-Project-ID";function Ma(t,e={}){const r={},n=e.token||t.token;n&&(r.Authorization=`Bearer ${n}`),!e.useGlobalApi&&!t.useProjectHostname&&t.projectId&&(r[xa]=t.projectId);const i=!!(typeof e.withCredentials>"u"?t.token||t.withCredentials:e.withCredentials),s=typeof e.timeout>"u"?t.timeout:e.timeout;return Object.assign({},e,{headers:Object.assign({},r,e.headers||{}),timeout:typeof s>"u"?5*60*1e3:s,proxy:e.proxy||t.proxy,json:!0,withCredentials:i,fetch:typeof e.fetch=="object"&&typeof t.fetch=="object"?{...t.fetch,...e.fetch}:e.fetch||t.fetch})}const ss=({query:t,params:e={},options:r={}})=>{const n=new URLSearchParams,{tag:i,includeMutations:s,returnQuery:o,...a}=r;i&&n.append("tag",i),n.append("query",t);for(const[c,l]of Object.entries(e))n.append(`$${c}`,JSON.stringify(l));for(const[c,l]of Object.entries(a))l&&n.append(c,`${l}`);return o===!1&&n.append("returnQuery","false"),s===!1&&n.append("includeMutations","false"),`?${n}`},Ia=(t,e)=>t===!1?void 0:typeof t>"u"?e:t,ja=(t={})=>({dryRun:t.dryRun,returnIds:!0,returnDocuments:Ia(t.returnDocuments,!0),visibility:t.visibility||"sync",autoGenerateArrayKeys:t.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:t.skipCrossDatasetReferenceValidation}),hr=t=>t.type==="response",Fa=t=>t.body,qa=(t,e)=>t.reduce((r,n)=>(r[e(n)]=n,r),Object.create(null)),La=11264;function is(t,e,r,n,i={},s={}){const o="stega"in s?{...r||{},...typeof s.stega=="boolean"?{enabled:s.stega}:s.stega||{}}:r,a=o.enabled?Qo(i):i,c=s.filterResponse===!1?h=>h:h=>h.result,{cache:l,next:u,...f}={useAbortSignal:typeof s.signal<"u",resultSourceMap:o.enabled?"withKeyArraySelector":s.resultSourceMap,...s,returnQuery:s.filterResponse===!1&&s.returnQuery!==!1},d=typeof l<"u"||typeof u<"u"?{...f,fetch:{cache:l,next:u}}:f,y=Pe(t,e,"query",{query:n,params:a},d);return o.enabled?y.pipe(Ko(xn(Ct(()=>import("./stegaEncodeSourceMap.DPkyoOST.js"),[],import.meta.url).then(function(h){return h.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap:h})=>h))),ne(([h,p])=>{const m=p(h.result,h.resultSourceMap,o);return c({...h,result:m})})):y.pipe(ne(c))}function os(t,e,r,n={}){const i={uri:_e(t,"doc",r),json:!0,tag:n.tag};return Ge(t,e,i).pipe(Be(hr),ne(s=>s.body.documents&&s.body.documents[0]))}function as(t,e,r,n={}){const i={uri:_e(t,"doc",r.join(",")),json:!0,tag:n.tag};return Ge(t,e,i).pipe(Be(hr),ne(s=>{const o=qa(s.body.documents||[],a=>a._id);return r.map(a=>o[a]||null)}))}function cs(t,e,r,n){return ht("createIfNotExists",r),Pt(t,e,r,"createIfNotExists",n)}function us(t,e,r,n){return ht("createOrReplace",r),Pt(t,e,r,"createOrReplace",n)}function ls(t,e,r,n){return Pe(t,e,"mutate",{mutations:[{delete:Fn(r)}]},n)}function fs(t,e,r,n){let i;r instanceof Ke||r instanceof ze?i={patch:r.serialize()}:r instanceof Zn||r instanceof ts?i=r.serialize():i=r;const s=Array.isArray(i)?i:[i],o=n&&n.transactionId||void 0;return Pe(t,e,"mutate",{mutations:s,transactionId:o},n)}function hs(t,e,r,n){const i=Array.isArray(r)?r:[r],s=n&&n.transactionId||void 0,o=n&&n.skipCrossDatasetReferenceValidation||void 0,a=n&&n.dryRun||void 0;return Pe(t,e,"actions",{actions:i,transactionId:s,skipCrossDatasetReferenceValidation:o,dryRun:a},n)}function Pe(t,e,r,n,i={}){const s=r==="mutate",o=r==="actions",a=r==="query",c=s||o?"":ss(n),l=!s&&!o&&c.length<La,u=l?c:"",f=i.returnFirst,{timeout:d,token:y,tag:h,headers:p,returnQuery:m,lastLiveEventId:v}=i,k=_e(t,r,u),S={method:l?"GET":"POST",uri:k,json:!0,body:l?void 0:n,query:s&&ja(i),timeout:d,headers:p,token:y,tag:h,returnQuery:m,perspective:i.perspective,resultSourceMap:i.resultSourceMap,lastLiveEventId:Array.isArray(v)?v[0]:v,canUseCdn:a,signal:i.signal,fetch:i.fetch,useAbortSignal:i.useAbortSignal,useCdn:i.useCdn};return Ge(t,e,S).pipe(Be(hr),ne(Fa),ne(w=>{if(!s)return w;const _=w.results||[];if(i.returnDocuments)return f?_[0]&&_[0].document:_.map(M=>M.document);const A=f?"documentId":"documentIds",R=f?_[0]&&_[0].id:_.map(M=>M.id);return{transactionId:w.transactionId,results:_,[A]:R}}))}function Pt(t,e,r,n,i={}){const s={[n]:r},o=Object.assign({returnFirst:!0,returnDocuments:!0},i);return Pe(t,e,"mutate",{mutations:[s]},o)}function Ge(t,e,r){var n,i;const s=r.url||r.uri,o=t.config(),a=typeof r.canUseCdn>"u"?["GET","HEAD"].indexOf(r.method||"GET")>=0&&s.indexOf("/data/")===0:r.canUseCdn;let c=((n=r.useCdn)!=null?n:o.useCdn)&&a;const l=r.tag&&o.requestTagPrefix?[o.requestTagPrefix,r.tag].join("."):r.tag||o.requestTagPrefix;if(l&&r.tag!==null&&(r.query={tag:Un(l),...r.query}),["GET","HEAD","POST"].indexOf(r.method||"GET")>=0&&s.indexOf("/data/query/")===0){const d=(i=r.resultSourceMap)!=null?i:o.resultSourceMap;d!==void 0&&d!==!1&&(r.query={resultSourceMap:d,...r.query});const y=r.perspective||o.perspective;typeof y=="string"&&y!=="raw"&&(rs(y),r.query={perspective:y,...r.query},y==="previewDrafts"&&c&&(c=!1,Ca())),r.lastLiveEventId&&(r.query={...r.query,lastLiveEventId:r.lastLiveEventId}),r.returnQuery===!1&&(r.query={returnQuery:"false",...r.query})}const u=Ma(o,Object.assign({},r,{url:dr(t,s,c)})),f=new Y(d=>e(u,o.requester).subscribe(d));return r.signal?f.pipe(Da(r.signal)):f}function Z(t,e,r){return Ge(t,e,r).pipe(Be(n=>n.type==="response"),ne(n=>n.body))}function _e(t,e,r){const n=t.config(),i=Dn(n),s=`/${e}/${i}`;return`/data${r?`${s}/${r}`:s}`.replace(/\/($|\?)/,"$1")}function dr(t,e,r=!1){const{url:n,cdnUrl:i}=t.config();return`${r?i:n}/${e.replace(/^\//,"")}`}function Da(t){return e=>new Y(r=>{const n=()=>r.error(Na(t));if(t&&t.aborted){n();return}const i=e.subscribe(r);return t.addEventListener("abort",n),()=>{t.removeEventListener("abort",n),i.unsubscribe()}})}const Ua=!!globalThis.DOMException;function Na(t){var e,r;if(Ua)return new DOMException((e=t==null?void 0:t.reason)!=null?e:"The operation was aborted.","AbortError");const n=new Error((r=t==null?void 0:t.reason)!=null?r:"The operation was aborted.");return n.name="AbortError",n}var ds=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},dt=(t,e,r)=>(ds(t,e,"read from private field"),r?r.call(t):e.get(t)),pt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},yt=(t,e,r,n)=>(ds(t,e,"write to private field"),e.set(t,r),r),nt,st;class za{constructor(e,r){pt(this,nt,void 0),pt(this,st,void 0),yt(this,nt,e),yt(this,st,r)}upload(e,r,n){return ps(dt(this,nt),dt(this,st),e,r,n)}}nt=new WeakMap,st=new WeakMap;var it,ot;class Ka{constructor(e,r){pt(this,it,void 0),pt(this,ot,void 0),yt(this,it,e),yt(this,ot,r)}upload(e,r,n){const i=ps(dt(this,it),dt(this,ot),e,r,n);return N(i.pipe(Be(s=>s.type==="response"),ne(s=>s.body.document)))}}it=new WeakMap,ot=new WeakMap;function ps(t,e,r,n,i={}){fa(r);let s=i.extract||void 0;s&&!s.length&&(s=["none"]);const o=Dn(t.config()),a=r==="image"?"images":"files",c=Wa(i,n),{tag:l,label:u,title:f,description:d,creditLine:y,filename:h,source:p}=c,m={label:u,title:f,description:d,filename:h,meta:s,creditLine:y};return p&&(m.sourceId=p.id,m.sourceName=p.name,m.sourceUrl=p.url),Ge(t,e,{tag:l,method:"POST",timeout:c.timeout||0,uri:`/assets/${a}/${o}`,headers:c.contentType?{"Content-Type":c.contentType}:{},query:m,body:n})}function Wa(t,e){return typeof File>"u"||!(e instanceof File)?t:Object.assign({filename:t.preserveFilename===!1?void 0:e.name,contentType:e.type},t)}var Va=(t,e)=>Object.keys(e).concat(Object.keys(t)).reduce((r,n)=>(r[n]=typeof t[n]>"u"?e[n]:t[n],r),{});const Ha=(t,e)=>e.reduce((r,n)=>(typeof t[n]>"u"||(r[n]=t[n]),r),{}),Ba=14800,Ja=["includePreviousRevision","includeResult","includeMutations","visibility","effectFormat","tag"],Ga={includeResult:!0};function ys(t,e,r={}){const{url:n,token:i,withCredentials:s,requestTagPrefix:o}=this.config(),a=r.tag&&o?[o,r.tag].join("."):r.tag,c={...Va(r,Ga),tag:a},l=Ha(c,Ja),u=ss({query:t,params:e,options:{tag:a,...l}}),f=`${n}${_e(this,"listen",u)}`;if(f.length>Ba)return new Y(p=>p.error(new Error("Query too large for listener")));const d=c.events?c.events:["mutation"],y=d.indexOf("reconnect")!==-1,h={};return(i||s)&&(h.withCredentials=!0),i&&(h.headers={Authorization:`Bearer ${i}`}),new Y(p=>{let m,v,k=!1,S=!1;b();function w(){k||(x(),!k&&m.readyState===m.CLOSED&&(M(),clearTimeout(v),v=setTimeout(b,100)))}function _(E){p.error(Ya(E))}function A(E){const O=gs(E);return O instanceof Error?p.error(O):p.next(O)}function R(){k=!0,M(),p.complete()}function M(){m&&(m.removeEventListener("error",w),m.removeEventListener("channelError",_),m.removeEventListener("disconnect",R),d.forEach(E=>m.removeEventListener(E,A)),m.close())}function x(){y&&p.next({type:"reconnect"})}async function g(){const{default:E}=await Ct(async()=>{const{default:$}=await import("./browser.CwROVprA.js").then(P=>P.b);return{default:$}},[],import.meta.url);if(S)return;const O=new E(f,h);return O.addEventListener("error",w),O.addEventListener("channelError",_),O.addEventListener("disconnect",R),d.forEach($=>O.addEventListener($,A)),O}function b(){g().then(E=>{E&&(m=E,S&&M())}).catch(E=>{p.error(E),C()})}function C(){k=!0,M(),S=!0}return C})}function gs(t){try{const e=t.data&&JSON.parse(t.data)||{};return Object.assign({type:t.type},e)}catch(e){return e}}function Ya(t){if(t instanceof Error)return t;const e=gs(t);return e instanceof Error?e:new Error(Qa(e))}function Qa(t){return t.error?t.error.description?t.error.description:typeof t.error=="string"?t.error:JSON.stringify(t.error,null,2):t.message||"Unknown listener error"}var ms=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ut=(t,e,r)=>(ms(t,e,"read from private field"),r?r.call(t):e.get(t)),Xa=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Za=(t,e,r,n)=>(ms(t,e,"write to private field"),e.set(t,r),r);const Zr="2021-03-26";var Ce;class vs{constructor(e){Xa(this,Ce,void 0),Za(this,Ce,e)}events(){const e=Ut(this,Ce).config().apiVersion.replace(/^v/,"");if(e!=="X"&&e<Zr)throw new Error(`The live events API requires API version ${Zr} or later. The current API version is ${e}. Please update your API version to use this feature.`);const r=_e(Ut(this,Ce),"live/events"),n=new URL(Ut(this,Ce).getUrl(r,!1)),i=["restart","message"];return new Y(s=>{let o,a,c=!1,l=!1;h();function u(m){if(!c){if("data"in m){const v=en(m);s.error(new Error(v.message,{cause:v}))}o.readyState===o.CLOSED&&(d(),clearTimeout(a),a=setTimeout(h,100))}}function f(m){const v=en(m);return v instanceof Error?s.error(v):s.next(v)}function d(){if(o){o.removeEventListener("error",u);for(const m of i)o.removeEventListener(m,f);o.close()}}async function y(){const m=typeof EventSource>"u"?(await Ct(async()=>{const{default:k}=await import("./browser.CwROVprA.js").then(S=>S.b);return{default:k}},[],import.meta.url)).default:EventSource;if(l)return;const v=new m(n.toString());v.addEventListener("error",u);for(const k of i)v.addEventListener(k,f);return v}function h(){y().then(m=>{m&&(o=m,l&&d())}).catch(m=>{s.error(m),p()})}function p(){c=!0,d(),l=!0}return p})}}Ce=new WeakMap;function en(t){try{const e=t.data&&JSON.parse(t.data)||{};return{type:t.type,id:t.lastEventId,...e}}catch(e){return e}}var ws=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},V=(t,e,r)=>(ws(t,e,"read from private field"),r?r.call(t):e.get(t)),gt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},mt=(t,e,r,n)=>(ws(t,e,"write to private field"),e.set(t,r),r),ye,ge;class ec{constructor(e,r){gt(this,ye,void 0),gt(this,ge,void 0),mt(this,ye,e),mt(this,ge,r)}create(e,r){return Re(V(this,ye),V(this,ge),"PUT",e,r)}edit(e,r){return Re(V(this,ye),V(this,ge),"PATCH",e,r)}delete(e){return Re(V(this,ye),V(this,ge),"DELETE",e)}list(){return Z(V(this,ye),V(this,ge),{uri:"/datasets",tag:null})}}ye=new WeakMap,ge=new WeakMap;var me,ve;class tc{constructor(e,r){gt(this,me,void 0),gt(this,ve,void 0),mt(this,me,e),mt(this,ve,r)}create(e,r){return N(Re(V(this,me),V(this,ve),"PUT",e,r))}edit(e,r){return N(Re(V(this,me),V(this,ve),"PATCH",e,r))}delete(e){return N(Re(V(this,me),V(this,ve),"DELETE",e))}list(){return N(Z(V(this,me),V(this,ve),{uri:"/datasets",tag:null}))}}me=new WeakMap,ve=new WeakMap;function Re(t,e,r,n,i){return qn(n),Z(t,e,{method:r,uri:`/datasets/${n}`,body:i,tag:null})}var bs=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},fe=(t,e,r)=>(bs(t,e,"read from private field"),r?r.call(t):e.get(t)),vt=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},wt=(t,e,r,n)=>(bs(t,e,"write to private field"),e.set(t,r),r),qe,Le;class rc{constructor(e,r){vt(this,qe,void 0),vt(this,Le,void 0),wt(this,qe,e),wt(this,Le,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return Z(fe(this,qe),fe(this,Le),{uri:r})}getById(e){return Z(fe(this,qe),fe(this,Le),{uri:`/projects/${e}`})}}qe=new WeakMap,Le=new WeakMap;var De,Ue;class nc{constructor(e,r){vt(this,De,void 0),vt(this,Ue,void 0),wt(this,De,e),wt(this,Ue,r)}list(e){const r=(e==null?void 0:e.includeMembers)===!1?"/projects?includeMembers=false":"/projects";return N(Z(fe(this,De),fe(this,Ue),{uri:r}))}getById(e){return N(Z(fe(this,De),fe(this,Ue),{uri:`/projects/${e}`}))}}De=new WeakMap,Ue=new WeakMap;var _s=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},bt=(t,e,r)=>(_s(t,e,"read from private field"),r?r.call(t):e.get(t)),_t=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Et=(t,e,r,n)=>(_s(t,e,"write to private field"),e.set(t,r),r),at,ct;class sc{constructor(e,r){_t(this,at,void 0),_t(this,ct,void 0),Et(this,at,e),Et(this,ct,r)}getById(e){return Z(bt(this,at),bt(this,ct),{uri:`/users/${e}`})}}at=new WeakMap,ct=new WeakMap;var ut,lt;class ic{constructor(e,r){_t(this,ut,void 0),_t(this,lt,void 0),Et(this,ut,e),Et(this,lt,r)}getById(e){return N(Z(bt(this,ut),bt(this,lt),{uri:`/users/${e}`}))}}ut=new WeakMap,lt=new WeakMap;var oc=Object.defineProperty,ac=(t,e,r)=>e in t?oc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,B=(t,e,r)=>(ac(t,typeof e!="symbol"?e+"":e,r),r),Es=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},T=(t,e,r)=>(Es(t,e,"read from private field"),r?r.call(t):e.get(t)),St=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},$t=(t,e,r,n)=>(Es(t,e,"write to private field"),e.set(t,r),r),ae,U;const cc=class Gt{constructor(e,r=We){B(this,"assets"),B(this,"datasets"),B(this,"live"),B(this,"projects"),B(this,"users"),St(this,ae,void 0),St(this,U,void 0),B(this,"listen",ys),this.config(r),$t(this,U,e),this.assets=new za(this,T(this,U)),this.datasets=new ec(this,T(this,U)),this.live=new vs(this),this.projects=new rc(this,T(this,U)),this.users=new sc(this,T(this,U))}clone(){return new Gt(T(this,U),this.config())}config(e){if(e===void 0)return{...T(this,ae)};if(T(this,ae)&&T(this,ae).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return $t(this,ae,ns(e,T(this,ae)||{})),this}withConfig(e){const r=this.config();return new Gt(T(this,U),{...r,...e,stega:{...r.stega||{},...typeof(e==null?void 0:e.stega)=="boolean"?{enabled:e.stega}:(e==null?void 0:e.stega)||{}}})}fetch(e,r,n){return is(this,T(this,U),T(this,ae).stega,e,r,n)}getDocument(e,r){return os(this,T(this,U),e,r)}getDocuments(e,r){return as(this,T(this,U),e,r)}create(e,r){return Pt(this,T(this,U),e,"create",r)}createIfNotExists(e,r){return cs(this,T(this,U),e,r)}createOrReplace(e,r){return us(this,T(this,U),e,r)}delete(e,r){return ls(this,T(this,U),e,r)}mutate(e,r){return fs(this,T(this,U),e,r)}patch(e,r){return new ze(e,r,this)}transaction(e){return new ts(e,this)}action(e,r){return hs(this,T(this,U),e,r)}request(e){return Z(this,T(this,U),e)}getUrl(e,r){return dr(this,e,r)}getDataUrl(e,r){return _e(this,e,r)}};ae=new WeakMap,U=new WeakMap;let uc=cc;var ce,D;const lc=class Yt{constructor(e,r=We){B(this,"assets"),B(this,"datasets"),B(this,"live"),B(this,"projects"),B(this,"users"),B(this,"observable"),St(this,ce,void 0),St(this,D,void 0),B(this,"listen",ys),this.config(r),$t(this,D,e),this.assets=new Ka(this,T(this,D)),this.datasets=new tc(this,T(this,D)),this.live=new vs(this),this.projects=new nc(this,T(this,D)),this.users=new ic(this,T(this,D)),this.observable=new uc(e,r)}clone(){return new Yt(T(this,D),this.config())}config(e){if(e===void 0)return{...T(this,ce)};if(T(this,ce)&&T(this,ce).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),$t(this,ce,ns(e,T(this,ce)||{})),this}withConfig(e){const r=this.config();return new Yt(T(this,D),{...r,...e,stega:{...r.stega||{},...typeof(e==null?void 0:e.stega)=="boolean"?{enabled:e.stega}:(e==null?void 0:e.stega)||{}}})}fetch(e,r,n){return N(is(this,T(this,D),T(this,ce).stega,e,r,n))}getDocument(e,r){return N(os(this,T(this,D),e,r))}getDocuments(e,r){return N(as(this,T(this,D),e,r))}create(e,r){return N(Pt(this,T(this,D),e,"create",r))}createIfNotExists(e,r){return N(cs(this,T(this,D),e,r))}createOrReplace(e,r){return N(us(this,T(this,D),e,r))}delete(e,r){return N(ls(this,T(this,D),e,r))}mutate(e,r){return N(fs(this,T(this,D),e,r))}patch(e,r){return new Ke(e,r,this)}transaction(e){return new Zn(e,this)}action(e,r){return N(hs(this,T(this,D),e,r))}request(e){return N(Z(this,T(this,D),e))}dataRequest(e,r,n){return N(Pe(this,T(this,D),e,r,n))}getUrl(e,r){return dr(this,e,r)}getDataUrl(e,r){return _e(this,e,r)}};ce=new WeakMap,D=new WeakMap;let fc=lc;function hc(t,e){const r=ca(t);return{requester:r,createClient:n=>new e((i,s)=>(s||r)({maxRedirects:0,maxRetries:n.maxRetries,retryDelay:n.retryDelay,...i}),n)}}var dc=[];const pc=hc(dc,fc),yc=pc.createClient,gc="i87qtavt",mc="production";function Ss(t,e){if(t===void 0)throw new Error(`Missing environment variable: ${e}`);return t}const vc=Ss(mc,"PUBLIC_SANITY_DATASET"),wc=Ss(gc,"PUBLIC_SANITY_PROJECT_ID"),bc="2024-03-15",_c="http://localhost:3333",Ic=yc({projectId:wc,dataset:vc,apiVersion:bc,useCdn:!0,stega:{studioUrl:_c}});export{Mc as C,fc as S,Ic as a,Cc as b,Ac as c,jr as f,hi as g,Rc as h,er as s,Pc as y};
