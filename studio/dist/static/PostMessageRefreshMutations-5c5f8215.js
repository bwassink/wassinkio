import{r as o,bs as v,aF as c,j as p}from"./sanity-8654a3cc.js";function f(r){const{channel:t,draft:e,published:n,livePreviewEnabled:l}=r,[i,a]=o.useState(e),[s,u]=o.useState(n);return o.useEffect(()=>{(i==null?void 0:i._rev)!==(e==null?void 0:e._rev)&&(o.startTransition(()=>a(e)),e&&(t==null||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(e)}))),(s==null?void 0:s._rev)!==(n==null?void 0:n._rev)&&(o.startTransition(()=>u(n)),n&&(t==null||t.send("overlays","presentation/refresh",{source:"mutation",livePreviewEnabled:l,document:d(n)})))},[t,e,l,i==null?void 0:i._rev,s==null?void 0:s._rev,n]),null}function d(r){const{_id:t,_type:e,_rev:n,slug:l}=r;return{_id:t,_type:e,_rev:n,slug:l}}var m=o.memo(function(r){const{channel:t,type:e,previewKitConnection:n,loadersConnection:l}=r,i=o.useMemo(()=>v(r.id),[r.id]),{draft:a,published:s,ready:u}=c(i,e,"low");return u&&a||s?p.jsx(f,{channel:t,draft:a,livePreviewEnabled:n==="connected"||l==="connected",published:s},i):null});export{m as default};
